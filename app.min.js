!function(){"use strict";var e={head:'<div class="head">\n    <div class="head__body">\n        <div class="head__logo-icon">\n            <img src="./img/logo-icon.svg" />\n        </div>\n\n        <div class="head__split"></div>\n\n        <div class="head__logo">\n            <img src="./img/logo.svg" />\n        </div>\n\n        <div class="head__title">\n            \n        </div>\n\n        <div class="head__action head__settings selector open--settings">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 368 368" style="enable-background:new 0 0 368 368;" xml:space="preserve">\n            <g>\n                <g>\n                    <path fill="currentColor" d="M344,144h-29.952c-2.512-8.2-5.8-16.12-9.792-23.664l21.16-21.16c4.528-4.528,7.024-10.56,7.024-16.984\n                        c0-6.416-2.496-12.448-7.024-16.976l-22.64-22.64c-9.048-9.048-24.888-9.072-33.952,0l-21.16,21.16\n                        c-7.536-3.992-15.464-7.272-23.664-9.792V24c0-13.232-10.768-24-24-24h-32c-13.232,0-24,10.768-24,24v29.952\n                        c-8.2,2.52-16.12,5.8-23.664,9.792l-21.168-21.16c-9.36-9.36-24.592-9.36-33.952,0l-22.648,22.64\n                        c-9.352,9.36-9.352,24.592,0,33.952l21.16,21.168c-3.992,7.536-7.272,15.464-9.792,23.664H24c-13.232,0-24,10.768-24,24v32\n                        C0,213.232,10.768,224,24,224h29.952c2.52,8.2,5.8,16.12,9.792,23.664l-21.16,21.168c-9.36,9.36-9.36,24.592,0,33.952\n                        l22.64,22.648c9.36,9.352,24.592,9.352,33.952,0l21.168-21.16c7.536,3.992,15.464,7.272,23.664,9.792V344\n                        c0,13.232,10.768,24,24,24h32c13.232,0,24-10.768,24-24v-29.952c8.2-2.52,16.128-5.8,23.664-9.792l21.16,21.168\n                        c9.072,9.064,24.912,9.048,33.952,0l22.64-22.64c4.528-4.528,7.024-10.56,7.024-16.976c0-6.424-2.496-12.448-7.024-16.976\n                        l-21.16-21.168c3.992-7.536,7.272-15.464,9.792-23.664H344c13.232,0,24-10.768,24-24v-32C368,154.768,357.232,144,344,144z\n                            M352,200c0,4.408-3.584,8-8,8h-36c-3.648,0-6.832,2.472-7.744,6c-2.832,10.92-7.144,21.344-12.832,30.976\n                        c-1.848,3.144-1.344,7.144,1.232,9.72l25.44,25.448c1.504,1.504,2.336,3.512,2.336,5.664c0,2.152-0.832,4.16-2.336,5.664\n                        l-22.64,22.64c-3.008,3.008-8.312,3.008-11.328,0l-25.44-25.44c-2.576-2.584-6.576-3.08-9.728-1.232\n                        c-9.616,5.68-20.04,10-30.968,12.824c-3.52,0.904-5.992,4.088-5.992,7.736v36c0,4.408-3.584,8-8,8h-32c-4.408,0-8-3.592-8-8v-36\n                        c0-3.648-2.472-6.832-6-7.744c-10.92-2.824-21.344-7.136-30.976-12.824c-1.264-0.752-2.664-1.112-4.064-1.112\n                        c-2.072,0-4.12,0.8-5.664,2.344l-25.44,25.44c-3.128,3.12-8.2,3.12-11.328,0l-22.64-22.64c-3.128-3.128-3.128-8.208,0-11.328\n                        l25.44-25.44c2.584-2.584,3.088-6.584,1.232-9.72c-5.68-9.632-10-20.048-12.824-30.976c-0.904-3.528-4.088-6-7.736-6H24\n                        c-4.408,0-8-3.592-8-8v-32c0-4.408,3.592-8,8-8h36c3.648,0,6.832-2.472,7.744-6c2.824-10.92,7.136-21.344,12.824-30.976\n                        c1.856-3.144,1.352-7.144-1.232-9.72l-25.44-25.44c-3.12-3.12-3.12-8.2,0-11.328l22.64-22.64c3.128-3.128,8.2-3.12,11.328,0\n                        l25.44,25.44c2.584,2.584,6.576,3.096,9.72,1.232c9.632-5.68,20.048-10,30.976-12.824c3.528-0.912,6-4.096,6-7.744V24\n                        c0-4.408,3.592-8,8-8h32c4.416,0,8,3.592,8,8v36c0,3.648,2.472,6.832,6,7.744c10.928,2.824,21.352,7.144,30.968,12.824\n                        c3.152,1.856,7.152,1.36,9.728-1.232l25.44-25.44c3.016-3.024,8.32-3.016,11.328,0l22.64,22.64\n                        c1.504,1.504,2.336,3.52,2.336,5.664s-0.832,4.16-2.336,5.664l-25.44,25.44c-2.576,2.584-3.088,6.584-1.232,9.72\n                        c5.688,9.632,10,20.048,12.832,30.976c0.904,3.528,4.088,6,7.736,6h36c4.416,0,8,3.592,8,8V200z"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <path fill="currentColor" d="M184,112c-39.696,0-72,32.304-72,72s32.304,72,72,72c39.704,0,72-32.304,72-72S223.704,112,184,112z M184,240\n                        c-30.88,0-56-25.12-56-56s25.12-56,56-56c30.872,0,56,25.12,56,56S214.872,240,184,240z"/>\n                </g>\n            </g>\n            </svg>\n        </div>\n\n        <div class="head__action head__settings selector open--notice notice--icon">\n            <svg enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path fill="currentColor" d="m411 262.862v-47.862c0-69.822-46.411-129.001-110-148.33v-21.67c0-24.813-20.187-45-45-45s-45 20.187-45 45v21.67c-63.59 19.329-110 78.507-110 148.33v47.862c0 61.332-23.378 119.488-65.827 163.756-4.16 4.338-5.329 10.739-2.971 16.267s7.788 9.115 13.798 9.115h136.509c6.968 34.192 37.272 60 73.491 60 36.22 0 66.522-25.808 73.491-60h136.509c6.01 0 11.439-3.587 13.797-9.115s1.189-11.929-2.97-16.267c-42.449-44.268-65.827-102.425-65.827-163.756zm-170-217.862c0-8.271 6.729-15 15-15s15 6.729 15 15v15.728c-4.937-.476-9.94-.728-15-.728s-10.063.252-15 .728zm15 437c-19.555 0-36.228-12.541-42.42-30h84.84c-6.192 17.459-22.865 30-42.42 30zm-177.67-60c34.161-45.792 52.67-101.208 52.67-159.138v-47.862c0-68.925 56.075-125 125-125s125 56.075 125 125v47.862c0 57.93 18.509 113.346 52.671 159.138z"/><path fill="currentColor" d="m451 215c0 8.284 6.716 15 15 15s15-6.716 15-15c0-60.1-23.404-116.603-65.901-159.1-5.857-5.857-15.355-5.858-21.213 0s-5.858 15.355 0 21.213c36.831 36.831 57.114 85.8 57.114 137.887z"/><path fill="currentColor" d="m46 230c8.284 0 15-6.716 15-15 0-52.086 20.284-101.055 57.114-137.886 5.858-5.858 5.858-15.355 0-21.213-5.857-5.858-15.355-5.858-21.213 0-42.497 42.497-65.901 98.999-65.901 159.099 0 8.284 6.716 15 15 15z"/></g></svg>\n        </div>\n\n        <div class="head__split"></div>\n\n        <div class="head__time">\n            <div class="head__time-now time--clock"></div>\n            <div>\n                <div class="head__time-date time--full"></div>\n                <div class="head__time-week time--week"></div>\n            </div>\n        </div>\n    </div>\n</div>',wrap:'<div class="wrap layer--height layer--width">\n    <div class="wrap__left layer--height"></div>\n    <div class="wrap__content layer--height layer--width"></div>\n</div>',menu:'<div class="menu">\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="search">\n                <div class="menu__ico"><img src="./img/icons/menu/browse.svg" /></div>\n                <div class="menu__text">Поиск</div>\n            </li>\n\n            <li class="menu__item selector" data-action="main">\n                <div class="menu__ico"><img src="./img/icons/menu/home.svg" /></div>\n                <div class="menu__text">Главная</div>\n            </li>\n\n            <li class="menu__item selector" data-action="movie">\n                <div class="menu__ico"><img src="./img/icons/menu/movie.svg" /></div>\n                <div class="menu__text">Фильмы</div>\n            </li>\n\n            <li class="menu__item selector" data-action="tv">\n                <div class="menu__ico"><img src="./img/icons/menu/tv.svg" /></div>\n                <div class="menu__text">Сериалы</div>\n            </li>\n\n            <li class="menu__item selector" data-action="catalog">\n                <div class="menu__ico"><img src="./img/icons/menu/catalog.svg" /></div>\n                <div class="menu__text">Каталог</div>\n            </li>\n        </ul>\n    </div>\n\n    <div class="menu__split"></div>\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="favorite" data-type="book">\n                <div class="menu__ico"><img src="./img/icons/menu/bookmark.svg" /></div>\n                <div class="menu__text">Закладки</div>\n            </li>\n\n            <li class="menu__item selector" data-action="favorite" data-type="like">\n                <div class="menu__ico"><img src="./img/icons/menu/like.svg" /></div>\n                <div class="menu__text">Нравится</div>\n            </li>\n\n            <li class="menu__item selector" data-action="favorite" data-type="wath">\n                <div class="menu__ico"><img src="./img/icons/menu/time.svg" /></div>\n                <div class="menu__text">Позже</div>\n            </li>\n        </ul>\n    </div>\n\n    <div class="menu__split"></div>\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="settings">\n                <div class="menu__ico"><img src="./img/icons/menu/settings.svg" /></div>\n                <div class="menu__text">Настройки</div>\n            </li>\n\n            <li class="menu__item selector" data-action="about">\n                <div class="menu__ico"><img src="./img/icons/menu/info.svg" /></div>\n                <div class="menu__text">О приложении</div>\n            </li>\n        </ul>\n    </div>\n</div>',activitys:'<div class="activitys layer--width">\n    <div class="activitys__slides"></div>\n</div>',activity:'<div class="activity layer--width">\n    <div class="activity__body"></div>\n    <div class="activity__loader"></div>\n</div>',settings:'<div class="settings">\n    <div class="settings__layer"></div>\n    <div class="settings__content layer--height">\n        <div class="settings__head">\n            <div class="settings__title">Настройки</div>\n        </div>\n        <div class="settings__body"></div>\n    </div>\n</div>',settings_main:'<div>\n    <div class="settings-folder selector" data-component="interface">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/panel.svg" />\n        </div>\n        <div class="settings-folder__name">Интерфейс</div>\n    </div>\n    <div class="settings-folder selector" data-component="parser">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/parser.svg" />\n        </div>\n        <div class="settings-folder__name">Парсер</div>\n    </div>\n    <div class="settings-folder selector" data-component="server">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/server.svg" />\n        </div>\n        <div class="settings-folder__name">TorrServer</div>\n    </div>\n</div>',settings_interface:'<div>\n    <div class="settings-param selector" data-type="toggle" data-name="interface_size">\n        <div class="settings-param__name">Размер интерфейса</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="background">\n        <div class="settings-param__name">Показывать фон</div>\n        <div class="settings-param__value"></div>\n    </div>\n</div>',settings_parser:'<div>\n    <div class="settings-param selector" data-type="toggle" data-name="parser_use">\n        <div class="settings-param__name">Использовать парсер</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Тем самым, вы соглашаетесь принять всю отвественность на себя за использования публичных ссылок, для просмотра торрент и онлайн контента</div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="parser_torrent_type">\n        <div class="settings-param__name">Тип парсера для торрентов</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param-title"><span>Jackett</span></div>\n\n    <div class="settings-param selector" data-type="input" data-name="jackett_url" placeholder="Например: 192.168.х">\n        <div class="settings-param__name">Ссылка</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Укажите ссылку на скрипт Jackett</div>\n    </div>\n\n    <div class="settings-param selector" data-type="input" data-name="jackett_key" placeholder="Например: sa0sk83d..">\n        <div class="settings-param__name">Api ключ</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Находится в Jackett</div>\n    </div>\n\n    <div class="settings-param-title"><span>Torlook</span></div>\n\n    <div class="settings-param selector" data-type="input" data-name="torlook_site" placeholder="...">\n        <div class="settings-param__name">Сайт</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Сайт с которого парсить</div>\n    </div>\n\n    <div class="settings-param selector is--torllok" data-type="toggle" data-name="torlook_parse_type">\n        <div class="settings-param__name">Метод парсинга сайта TorLook</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector is--torllok" data-type="input" data-name="parser_website_url" placeholder="Например: scraperapi.com">\n        <div class="settings-param__name">Ссылка на парсер сайтов</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Зарегистрируйтесь на сайте scraperapi.com, прописать ссылку api.scraperapi.com?api_key=...&url={q}<br>В {q} будет поставлятся сайт w41.torlook.info</div>\n    </div>\n</div>',settings_server:'<div>\n    <div class="settings-param selector" data-type="input" data-name="torrserver_url" placeholder="Например: 192.168.х">\n        <div class="settings-param__name">Ссылка</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Укажите ссылку на скрипт TorrServer</div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="torrserver_savedb">\n        <div class="settings-param__name">Сохранить в базу</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Торрент будет добавлен в базу TorrServer</div>\n    </div>\n</div>',scroll:'<div class="scroll">\n    <div class="scroll__content">\n        <div class="scroll__body">\n            \n        </div>\n    </div>\n</div>',items_line:'<div class="items-line">\n    <div class="items-line__head">\n        <div class="items-line__title">{title}</div>\n    </div>\n    <div class="items-line__body"></div>\n</div>',card:'<div class="card selector">\n    <div class="card__view">\n        <img src="./img/img_load.svg" class="card__img" />\n    </div>\n\n    <div class="card__icons">\n        <div class="card__icons-inner">\n            \n        </div>\n    </div>\n    \n    <div class="card__title">{title}</div>\n    <div class="card__age">{release_date}</div>\n\n    \n</div>',full_start:'<div class="full-start">\n\n    <div class="full-start__body">\n        <div class="full-start__right">\n            <div class="full-start__poster">\n                <img src="{img}" class="full-start__img" />\n            </div>\n        </div>\n\n        <div class="full-start__left">\n            <div class="full-start__tags">\n                <div class="full-start__tag">\n                    <img src="./img/icons/pulse.svg" /> <div>{genres}</div>\n                </div>\n                <div class="full-start__tag">\n                    <img src="./img/icons/time.svg" /> <div>{time}</div>\n                </div>\n                <div class="full-start__tag hide is--serial">\n                    <img src="./img/icons/menu/catalog.svg" /> <div>{seasons}</div>\n                </div>\n                <div class="full-start__tag hide is--serial">\n                    <img src="./img/icons/menu/movie.svg" /> <div>{episodes}</div>\n                </div>\n            </div>\n\n            <div class="full-start__title">{title}</div>\n            <div class="full-start__title-original">{original_title}</div>\n\n            <div class="full-start__descr">{descr}</div>\n        </div>\n\n        \n    </div>\n\n    <div class="full-start__buttons">\n        <div class="full-start__button selector view--trailer">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n            <g>\n                <g>\n                    <path fill="currentColor" d="M482.909,67.2H29.091C13.05,67.2,0,80.25,0,96.291v319.418C0,431.75,13.05,444.8,29.091,444.8h453.818\n                        c16.041,0,29.091-13.05,29.091-29.091V96.291C512,80.25,498.95,67.2,482.909,67.2z M477.091,409.891H34.909V102.109h442.182\n                        V409.891z"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="126.836" y="84.655" width="34.909" height="342.109"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="350.255" y="84.655" width="34.909" height="342.109"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="367.709" y="184.145" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="17.455" y="184.145" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="367.709" y="292.364" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="17.455" y="292.364" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            \n            </svg>\n\n            <span>Трейлеры</span>\n        </div>\n\n        <div class="full-start__button selector open--menu">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M436.742,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.755,75.258,75.258,75.258\n                            C478.239,331.258,512,297.503,512,256C512,214.503,478.239,180.742,436.742,180.742z M436.742,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246s38.246,17.155,38.246,38.246\n                            S457.833,294.246,436.742,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M256,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.761,75.258,75.258,75.258c41.503,0,75.258-33.755,75.258-75.258\n                            C331.258,214.503,297.503,180.742,256,180.742z M256,294.246c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246\n                            s38.246,17.155,38.246,38.246S277.091,294.246,256,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M75.258,180.742C33.761,180.742,0,214.503,0,256c0,41.503,33.761,75.258,75.258,75.258\n                            c41.497,0,75.258-33.755,75.258-75.258C150.516,214.503,116.755,180.742,75.258,180.742z M75.258,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246c21.091,0,38.246,17.155,38.246,38.246\n                            S96.342,294.246,75.258,294.246z"/>\n                    </g>\n                </g>\n            </svg>\n        </div>\n\n        <div class="full-start__icons">\n            <div class="info__icon icon--book"></div>\n            <div class="info__icon icon--like"></div>\n            <div class="info__icon icon--wath"></div>\n        </div>\n\n        <div class="info__rate"><span>{r_themovie}</span></div>\n    </div>\n</div>',full_descr:'<div class="full-descr">\n    <div class="full-descr__left">\n        <div class="full-descr__text">{text}</div>\n\n        <div class="full-descr__line">\n            <div class="full-descr__line-name">Жанр</div>\n            <div class="full-descr__line-body">{genres}</div>\n        </div>\n\n        <div class="full-descr__line">\n            <div class="full-descr__line-name">Производство</div>\n            <div class="full-descr__line-body">{companies}</div>\n        </div>\n    </div>\n\n    <div class="full-descr__right">\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Дата релиза</div>\n            <div class="full-descr__info-body">{relise}</div>\n        </div>\n\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Бюджет</div>\n            <div class="full-descr__info-body">{budget}</div>\n        </div>\n\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Страны</div>\n            <div class="full-descr__info-body">{countries}</div>\n        </div>\n    </div>\n</div>',full_actor:'<div class="full-actor selector">\n    <img src="{img}" class="full-actor__foto" />\n\n    <div class="full-actor__body">\n        <div class="full-actor__firstname">{firstname}</div>\n        <div class="full-actor__lastname">{lastname}</div>\n    </div>\n</div>',full_review:'<div class="full-review selector">\n    <img src="{img}" class="full-actor__foto" />\n\n   \n</div>',player:'<div class="player">\n    \n</div>',player_panel:'<div class="player-panel">\n    <div class="player-panel__timeline">\n        <div class="player-panel__peding"></div>\n        <div class="player-panel__position"><div></div></div>\n        <div class="player-panel__time"></div>\n    </div>\n\n    <div class="player-panel__body">\n        <div class="player-panel__line">\n            <div class="player-panel__timenow"></div>\n            <div class="player-panel__timeend"></div>\n        </div>\n\n        <div class="player-panel__line">\n            <div class="player-panel__left">\n                <div class="player-panel__filename"></div>\n            </div>\n            <div class="player-panel__center">\n                <div class="player-panel__prev button selector"></div>\n                <div class="player-panel__playpause button selector"></div>\n                <div class="player-panel__next button selector"></div>\n            </div>\n            <div class="player-panel__right">\n                <div class="player-panel__playlist button selector"></div>\n                <div class="player-panel__subs button selector hide"></div>\n                <div class="player-panel__size button selector"></div>\n            </div>\n        </div>\n    </div>\n</div>',player_video:'<div class="player-video">\n    <div class="player-video__display"></div>\n    <div class="player-video__loader"></div>\n</div>',selectbox:'<div class="selectbox">\n    <div class="selectbox__layer"></div>\n    <div class="selectbox__content layer--height">\n        <div class="selectbox__head">\n            <div class="selectbox__title"></div>\n        </div>\n        <div class="selectbox__body"></div>\n    </div>\n</div>',selectbox_item:'<div class="selectbox-item selector">\n    <div class="selectbox-item__title">{title}</div>\n    <div class="selectbox-item__subtitle">{subtitle}</div>\n</div>',info:'<div class="info layer--width">\n    <div class="info__rate"><span></span></div>\n    <div class="info__left">\n        <div class="info__title"></div>\n        <div class="info__title-original"></div>\n        <div class="info__create"></div>\n    </div>\n    <div class="info__right">\n        <div class="info__icon icon--book"></div>\n        <div class="info__icon icon--like"></div>\n        <div class="info__icon icon--wath"></div>\n    </div>\n</div>',more:'<div class="card-more selector">\n    <div class="card-more__title">\n        Еще\n    </div>\n</div>',search:'<div class="search">\n    <div class="search__left">\n        <div class="search__title">Поиск</div>\n        <div class="search__input">Введите текст...</div>\n        <div class="search__keypad"><div class="simple-keyboard"></div></div>\n        <div class="search__history"></div>\n    </div>\n    <div class="search__results"></div>\n</div>',settings_input:'<div class="settings-input">\n    <div class="settings-input__content">\n        <div class="settings-input__input"></div>\n\n        <div class="simple-keyboard"></div>\n\n        <div class="settings-input__links">Выбрать ссылку</div>\n    </div>\n</div>',modal:'<div class="modal">\n    <div class="modal__content">\n        <div class="modal__head">\n            <div class="modal__title">{title}</div>\n        </div>\n        <div class="modal__body">\n            \n        </div>\n    </div>\n</div>',company:'<div class="company">\n    <div class="company__name">{name}</div>\n    <div class="company__headquarters">Штаб: {headquarters}</div>\n    <div class="company__homepage">Сайт: {homepage}</div>\n    <div class="company__country">Страна: {origin_country}</div>\n</div>',modal_loading:'<div class="modal-loading">\n    \n</div>',modal_pending:'<div class="modal-pending">\n    <div class="modal-pending__loading"></div>\n    <div class="modal-pending__text">{text}</div>\n</div>',actor_start:'<div class="actor-start">\n\n    <div class="actor-start__body">\n        <div class="actor-start__right">\n            <div class="actor-start__poster">\n                <img src="{img}" class="actor-start__img" />\n            </div>\n        </div>\n\n        <div class="actor-start__left">\n            <div class="actor-start__tags">\n                <div class="actor-start__tag">\n                    <img src="./img/icons/pulse.svg" /> <div>{birthday}</div>\n                </div>\n            </div>\n            \n            <div class="actor-start__name">{name}</div>\n            <div class="actor-start__place">{place}</div>\n\n            <div class="actor-start__descr">{descr}</div>\n\n\n            \n        </div>\n    </div>\n\n    <div class="full-start__buttons hide">\n        <div class="full-start__button selector">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M436.742,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.755,75.258,75.258,75.258\n                            C478.239,331.258,512,297.503,512,256C512,214.503,478.239,180.742,436.742,180.742z M436.742,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246s38.246,17.155,38.246,38.246\n                            S457.833,294.246,436.742,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M256,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.761,75.258,75.258,75.258c41.503,0,75.258-33.755,75.258-75.258\n                            C331.258,214.503,297.503,180.742,256,180.742z M256,294.246c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246\n                            s38.246,17.155,38.246,38.246S277.091,294.246,256,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M75.258,180.742C33.761,180.742,0,214.503,0,256c0,41.503,33.761,75.258,75.258,75.258\n                            c41.497,0,75.258-33.755,75.258-75.258C150.516,214.503,116.755,180.742,75.258,180.742z M75.258,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246c21.091,0,38.246,17.155,38.246,38.246\n                            S96.342,294.246,75.258,294.246z"/>\n                    </g>\n                </g>\n            </svg>\n        </div>\n\n        <div class="full-start__icons">\n            <div class="info__icon icon--like"></div>\n        </div>\n    </div>\n</div>',empty:'<div class="empty">\n    <div class="empty__img selector"></div>\n    <div class="empty__title">Здесь пусто</div>\n    <div class="empty__descr">На данный момент список пустой</div>\n</div>',notice:'<div class="notice selector">\n    <div class="notice__time">{time}</div>\n    <div class="notice__title">{title}</div>\n    <div class="notice__descr">{descr}</div>\n</div>',torrent:'<div class="torrent-item selector">\n    <div class="torrent-item__title">{title}</div>\n    <div class="torrent-item__details">\n        <div class="torrent-item__date">{date}</div>\n        <div class="torrent-item__tracker">{tracker}</div>\n\n        <div class="torrent-item__seeds">Раздают: <span>{seeds}</span></div>\n        <div class="torrent-item__grabs">Качают: <span>{grabs}</span></div>\n        \n        <div class="torrent-item__size">{size}</div>\n    </div>\n</div>',torrent_file:'<div class="torrent-file selector">\n    <div class="torrent-file__title">{title}</div>\n    <div class="torrent-file__size">{size}</div>\n</div>',files:'<div class="files">\n    <div class="files__left">\n        <div class="full-start__poster">\n            <img src="{img}" class="full-start__img" />\n        </div>\n\n        <div class="files__title">{title}</div>\n        <div class="files__title-original">{original_title}</div>\n    </div>\n    <div class="files__body">\n        \n    </div>\n</div>',about:'<div class="about">\n    <div>Приложение полностью бесплатное и использует публичные ссылки для просмотра информации о фильмах, новинках, популярных фильмов и т.д. Вся доступная информация используется исключительно в познавательных целях, приложение не использует свои собственные серверы для распространения информации.</div>\n\n\n    <div class="about__contacts">\n        <div>\n            <small>Наш канал</small><br>\n            @lampa_channel\n        </div>\n\n        <div>\n            <small>Группа</small><br>\n            @lampa_group\n        </div>\n\n        <div>\n            <small>Версия</small><br>\n            1.0.6\n        </div>\n    </div>\n</div>',error:'<div class="error">\n    <div class="error__ico"></div>\n    <div class="error__body">\n        <div class="error__title">{title}</div>\n        <div class="error__text">{text}</div>\n    </div>\n</div>'};var t={get:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e[t];if(!o)throw"Шаблон: "+t+" не найден!";for(var a in n)o=o.replace(new RegExp("{"+a+"}","g"),n[a]);return o=o.replace(/{\@([a-z_-]+)}/g,(function(t,n){return e[n]||""})),i?o:$(o)}};function n(){this.follow=function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},this.has=function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},this.remove=function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},this.send=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){t.target=this;for(var o=i.slice(0),a=0,r=o.length;a<r;a++)o[a].call(this,t)}}},this.destroy=function(){this._listeners=null}}function i(){return new n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){if("[object Object]"===Object.prototype.toString.call(e)){var t=[];for(var n in e)t.push(e[n]);return t}return"string"==typeof e||null==e?[]:e}var r={toObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)?e:e={}},toArray:a,decodeJson:function(e,t){var n=t||{};if(e)try{n=JSON.parse(e)}catch(e){}return n},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},extend:function(e,t,n){for(var i in t)"object"==o(t[i])?(null==e[i]&&(e[i]="[object Array]"==Object.prototype.toString.call(t[i])?[]:{}),this.extend(e[i],t[i],n)):(null==e[i]||n)&&(e[i]=t[i])},getKeys:function(e,t){var n=t||[];for(var i in e)n.push(i);return n},getValues:function(e,t){var n=t||[];for(var i in e)n.push(e[i]);return n},insert:function(e,t,n){e.splice(t,0,n)},clone:function(e){return JSON.parse(JSON.stringify(e))},remove:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},destroy:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"destroy",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=a(e),o=i.length-1;o>=0;o--)i[o]&&i[o][t]&&i[o][t](n)},empty:function(e,t){for(var n in t)e[n]||(e[n]=t[n])}};function s(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=window.SimpleKeyboard.default,a={en:["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{RU} q w e r t y u i o p","a s d f g h j k l {enter}","{shift} z x c v b n m , . : http://","{space}"],"en-shift":["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{RU} Q W E R T Y U I O P","A S D F G H J K L {enter}","{shift} Z X C V B N M , . : http://","{space}"],abc:["1 2 3 4 5 6 7 8 9 0 - + = {bksp}","! @ # $ % ^ & * ( ) [ ]","- _ = + \\ | [ ] { } {enter}","; : ' \" , . < > / ?","{rus} {space} {eng}"],default:["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{EN} й ц у к е н г ш щ з х ъ","ф ы в а п р о л д ж э {enter}","{shift} я ч с м и т ь б ю , . : http://","{space}"],"ru-shift":["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{EN} Й Ц У К Е Н Г Ш Щ З Х Ъ","Ф Ы В А П Р О Л Д Ж Э {enter}","{shift} Я Ч С М И Т Ь Б Ю , . : http://","{space}"]};this.listener=i(),this.create=function(){var t=this;e=new o({display:{"{bksp}":"&nbsp;","{enter}":"&nbsp;","{shift}":"&nbsp;","{space}":"&nbsp;","{RU}":"&nbsp;","{EN}":"&nbsp;","{abc}":"&nbsp;","{rus}":"русский","{eng}":"english"},layout:n.layout||a,onChange:function(e){t.listener.send("change",{value:e})},onKeyPress:function(e){"{shift}"===e||"{abc}"===e||"{EN}"===e||"{RU}"===e||"{rus}"===e||"{eng}"===e?t._handle(e):"{enter}"===e&&t.listener.send("enter")}})},this.value=function(t){e.setInput(t),this.listener.send("change",{value:t})},this._layout=function(){var n=$(".simple-keyboard .hg-button").addClass("selector");Jt.collectionSet($(".simple-keyboard")),Jt.collectionFocus(t||n[0],$(".simple-keyboard")),$(".simple-keyboard .hg-button:not(.binded)").on("hover:enter",(function(t,n){Jt.collectionFocus($(this)[0]),n||e.handleButtonClicked($(this).attr("data-skbtn"),t)})).on("hover:focus",(function(e){t=e.target})),n.addClass("binded")},this._handle=function(n){var i=e.options.layoutName,o="default";"{shift}"==n?"default"==i?o="ru-shift":"ru-shift"==i?o="default":"en"==i?o="en-shift":"en-shift"==i&&(o="en"):"{abc}"==n?o="abc":"{EN}"==n||"{eng}"==n?o="en":"{RU}"!=n&&"{rus}"!=n||(o="default"),e.setOptions({layoutName:o}),t=!1,Jt.toggle("keybord")},this.toggle=function(){var e=this;Jt.add("keybord",{toggle:function(){e._layout()},up:function(){Navigator.canmove("up")?Navigator.move("up"):e.listener.send("up")},down:function(){Navigator.canmove("down")?Navigator.move("down"):e.listener.send("down")},left:function(){Navigator.canmove("left")?Navigator.move("left"):e.listener.send("left")},right:function(){Navigator.canmove("right")?Navigator.move("right"):e.listener.send("right")},back:function(){e.listener.send("back")}}),Jt.toggle("keybord")},this.destroy=function(){e.destroy(),this.listener.destroy()}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.get("scroll"),i=n.find(".scroll__body"),o=n.find(".scroll__content");n.toggleClass("scroll--horizontal",!!e.horizontal),n.toggleClass("scroll--mask",!!e.mask),n.toggleClass("scroll--over",!!e.over),n.toggleClass("scroll--nopadding",!!e.nopadding),this.update=function(t,n){var a=e.horizontal?"left":"top",r=e.horizontal?"width":"height",s=t.offset()[a],l=i.offset()[a]+(n?o[r]()/2-t[r]()/2:0),c=Math.min(0,l-s);i.css("transform","translate3d("+(e.horizontal?c:0)+"px, "+(e.horizontal?0:c)+"px, 0px)")},this.append=function(e){i.append(e)},this.render=function(e){return e&&i.append(e),n},this.clear=function(){i.empty()},this.reset=function(){i.css("transform","translate3d(0px, 0px, 0px)")},this.destroy=function(){n.remove(),i=null,o=null,n=null}}function c(){return"https:"==window.protocol?"https://":"http://"}var d,u={secondsToTime:function(e,t){var n=parseInt(e,10),i=Math.floor(n/3600),o=Math.floor((n-3600*i)/60),a=n-3600*i-60*o;return i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),t?i+":"+o:i+":"+o+":"+a},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},substr:function(e,t){return(e=e||"").length>t?e.substr(0,t)+"...":e},numberWithSpaces:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},time:function(e){return new function(){var t=["Январь","Февраль","Март","Апрель","Ма","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],n=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];this.moth=function(e){var n=t[e];return"ь"==n.slice(-1)?n.slice(0,n.length-1)+"я":"Ма"==n?n+"я":n+"а"},this.tik=function(){var i=new Date,o=i.getTime(),a=parseInt("0");(o=[(i=new Date(o+1e3*a*60*60)).getHours(),i.getMinutes(),i.getSeconds(),i.getFullYear()])[0]<10&&(o[0]="0"+o[0]),o[1]<10&&(o[1]="0"+o[1]),o[2]<10&&(o[2]="0"+o[2]);var r=[o[0],o[1]].join(":"),s=i.getDay(),l=i.getDate();$(".time--clock",e).text(r),$(".time--week",e).text(n[s]),$(".time--day",e).text(l),$(".time--moth",e).text(t[i.getMonth()]),$(".time--full",e).text(l+" "+this.moth(i.getMonth())+" "+o[3])},setInterval(this.tik.bind(this),1e3),this.tik()}},bytesToSize:function(e,t){if(0==e)return"0 Bytes";var n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];t&&(n=["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]);var i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(2))+" "+n[i]},parseTime:function(e){var t=["Январь","Февраль","Март","Апрель","Ма","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],n=new Date(e),i=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getFullYear()];i[0]<10&&(i[0]="0"+i[0]),i[1]<10&&(i[1]="0"+i[1]),i[2]<10&&(i[2]="0"+i[2]);var o,a,r=[i[0],i[1]].join(":"),s=n.getDay(),l=n.getDate();return{time:r,week:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],day:l,mouth:t[n.getMonth()],full:l+" "+(o=n.getMonth(),a=t[o],("ь"==a.slice(-1)?a.slice(0,a.length-1)+"я":"Ма"==a?a+"я":a+"а")+" ")+i[3]}},checkHttp:function(e){return e=(e=e.replace(/https:\/\//,"")).replace(/http:\/\//,""),e=c()+e},shortText:function(e,t,n){if(e.length<=t)return e;var i=t-(n=n||"...").length,o=Math.ceil(i/2),a=Math.floor(i/2);return e.substr(0,o)+n+e.substr(e.length-a)},protocol:c,addUrlComponent:function(e,t){return e+(/\?/.test(e)?"&":"?")+t}},v=t.get("selectbox"),g=new l({mask:!0,over:!0});function f(){$("body").toggleClass("selectbox--open",!1)}v.find(".selectbox__body").append(g.render()),$("body").append(v);var p,h,m,_={show:function(e){d=e,g.clear(),v.find(".selectbox__title").text(d.title),d.items.forEach((function(e){if(!e.hide){e.title=u.capitalizeFirstLetter(e.title||"");var n=t.get(e.template||"selectbox_item",e);if(e.subtitle||n.find(".selectbox-item__subtitle").remove(),!e.noenter){var i=function(){d.nohide||f(),d.onSelect&&d.onSelect(e)};n.on("hover:enter",(function(){d.onBeforeClose?d.onBeforeClose()&&i():i()})).on("hover:focus",(function(t){g.update($(t.target),!0),d.onFocus&&d.onFocus(e,t.target)}))}e.selected&&n.addClass("selected"),g.append(n)}})),$("body").toggleClass("selectbox--open",!0),v.find(".selectbox__body").addClass("layer--wheight").data("mheight",v.find(".selectbox__head")),Jt.add("select",{toggle:function(){var e=g.render().find(".selected");Jt.collectionSet(v),Jt.collectionFocus(!!e.length&&e[0],v)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){f(),d.onBack&&d.onBack()}}),Jt.toggle("select")},hide:f};function y(){h.destroy(),p.remove(),p=null,h=null,m=null,Jt.toggle("settings_component")}var b={edit:function(e,n){p=t.get("settings_input"),m=p.find(".settings-input__input"),$("body").append(p),(h=new s).listener.follow("change",(function(e){m.text(e.value.trim())})),h.listener.follow("enter",(function(e){n(m.text()),y()})),h.listener.follow("down",(function(e){_.show({title:"Ссылки",items:[{title:u.shortText("api.scraperapi.com/?url={q}&api_key=",35),subtitle:"scraperapi.com",url:"api.scraperapi.com/?url={q}&api_key="},{title:u.shortText("Для торрентов jac.red",35),subtitle:"jac.red",url:"jac.red"}],onSelect:function(e){h.value(e.url),h.toggle()},onBack:function(){h.toggle()}})})),h.listener.follow("back",y),h.create(),h.value(e.value),h.toggle()}},w={},k={};function x(e,t){w[e]={true:"Да",false:"Нет"},k[e]=t}function C(e,t,n){w[e]=t,k[e]=n}function S(e){var t=e.data("name"),n=T.get(t,k[t]+""),i="string"==typeof w[t]?n:w[t][n],o=e.attr("placeholder");!i&&o&&(i=o),e.find(".settings-param__value").text(i)}C("interface_size",{small:"Меньше",normal:"Нормальный",bigger:"Больше"},"normal"),C("parser_torrent_type",{jackett:"Jackett",torlook:"Torlook"},"jackett"),C("torlook_parse_type",{native:"Напрямую",site:"Через API сайта"},"native"),x("background",!0),x("torrserver_savedb",!1),x("parser_use",!1),C("jackett_url","","jac.red"),C("jackett_key","",""),C("torrserver_url","",""),C("parser_website_url","",""),C("torlook_site","","w41.torlook.info");var N={bind:function(e){e.on("hover:enter",(function(e){var t=$(e.target),n=t.data("type"),i=t.data("name");if("toggle"==n){var o=w[i],a=r.isArray(o)?o:r.getKeys(o),s=T.get(i,k[i])+"",l=a.indexOf(s);++l>=a.length&&(l=0),s=a[l=Math.max(0,Math.min(a.length-1,l))],T.set(i,s),S(t)}"input"==n&&b.edit({elem:t,name:i,value:T.get(i,k[i])+""},(function(e){T.set(i,e),S(t)}))})).each((function(){S($(this))}))},update:S,field:function(e){return T.get(e,k[e]+"")}},M=i();var T={listener:M,get:function(e,t){var n=window.localStorage.getItem(e)||t||"",i=parseInt(n);if(!isNaN(i)&&/^\d+$/.test(n))return i;if("true"==n||"false"==n)return"true"==n;try{n=JSON.parse(n)}catch(e){}return n},set:function(e,t){if(r.isObject(t)||r.isArray(t)){var n=JSON.stringify(t);window.localStorage.setItem(e,n)}else window.localStorage.setItem(e,t);M.send("change",{name:e,value:t})},field:function(e){return N.field(e)}};function z(){var e,t,n=i(),o=[],a={timeout:6e4};function s(e,t){return 0===e.status&&"timeout"!==t?"Нет подключения к сети.":404==e.status?"Запрошенная страница не найдена. [404]":401==e.status?"Авторизация не удалась":500==e.status?"Внутренняя ошибка сервера. [500]":"parsererror"===t?"Запрошенный синтаксический анализ JSON завершился неудачно.":"timeout"===t?"Время запроса истекло.":"abort"===t?"Запрос был прерван.":"custom"===t?e.responseText:"Неизвестная ошибка: "+e.responseText}function l(e){n.send("go"),t=e,e.start&&e.start();console.log("Reguest","send:",e.url);var i={dataType:e.dataType||"json",url:e.url,timeout:a.timeout,crossDomain:!0,success:function(t){console.log("Reguest","result:",t),function(t){if(e.before_complite&&e.before_complite(t),e.complite)try{e.complite(t)}catch(e){console.log("Reguest","complite error:",e.message+"\n\n"+e.stack,e.line||e.lineno,e.col||e.colno)}e.after_complite&&e.after_complite(t),e.end&&e.end()}(t)},error:function(t,n){console.log("Reguest","error:",s(t,n),t,n),e.before_error&&e.before_error(t,n),e.error&&e.error(t,n),e.after_error&&e.after_error(t,n),e.end&&e.end()},beforeSend:function(e){e.withCredentials=!1}};e.post_data&&(i.type="POST",i.data=e.post_data),$.ajax(i),a.timeout=6e4}this.timeout=function(e){a.timeout=e},this.get=function(e,t,i,o){clear(),l({url:e,post_data:o,start:function(){n.send("start")},before_complite:function(){n.send("before_complite")},complite:function(e){t&&t(e)},after_complite:function(){n.send("after_complite")},before_error:function(){n.send("before_error")},error:function(e){i&&i(e)},after_error:function(){n.send("after_error")},end:function(){n.send("end")}})},this.quiet=function(e,t,n,i,o){var a={};o&&(a=o);var s={url:e,post_data:i,complite:function(e){t&&t(e)},error:function(e){n&&n(e)}};r.extend(s,a,!0),l(s)},this.silent=function(e,t,i,a,s){var c={};s&&(c=s);var d={url:e,complite:t,error:i};o.push(d);var u={url:e,post_data:a,complite:function(e){-1!==o.indexOf(d)&&d.complite&&d.complite(e)},error:function(e){-1!==o.indexOf(d)&&d.error&&d.error(e)},end:function(){n.send("end")}};r.extend(u,c,!0),l(u)},this.last=function(t,n,i,o){e={url:t,complite:n,error:i},l({url:t,post_data:o,complite:function(t){e&&e.complite&&e.complite(t)},error:function(t){e&&e.error&&e.error(t)},end:function(){dispatchEvent({type:"load:end"})}})},this.native=function(e,i,s,c,d){var u={};d&&(u=d);var v={url:e,complite:i,error:s};o.push(v);var g={url:e,post_data:c,complite:function(e){-1!==o.indexOf(v)&&v.complite&&v.complite(e)},error:function(e){-1!==o.indexOf(v)&&v.error&&v.error(e)},end:function(){n.send("end")}};r.extend(g,u,!0),function(e){n.send("go"),t=e,e.start&&e.start();T.get("platform","");console.log("Native reguest","send:",e.url),l(e);a.timeout=6e4}(g)},this.clear=function(){o=[]},this.again=function(e){(e||t)&&l(e||t)},this.latest=function(){return t},this.errorDecode=function(e,t){return s(e,t)}}var j=T.get("favorite","{}");function E(){T.set("favorite",j)}function B(e,t){j[e].indexOf(t.id)<0&&(r.insert(j[e],0,t.id),function(e){for(var t,n=0;n<j.card.length;n++){var i=j.card[n];if(i.id==e){t=i;break}}return t}(t.id)||j.card.push(t),E())}function O(e,t){r.remove(j[e],t.id);for(var n=j.card.length-1;n>=0;n--){var i=j.card[n];F(i).any||r.remove(j.card,i)}E()}function F(e){var t={like:j.like.indexOf(e.id)>-1,wath:j.wath.indexOf(e.id)>-1,book:j.book.indexOf(e.id)>-1,any:!0};return t.like||t.wath||t.book||(t.any=!1),t}r.extend(j,{like:[],wath:[],book:[],card:[]});var U={check:F,add:B,remove:O,toggle:function(e,t){F(t)[e]?O(e,t):B(e,t)},get:function(e){var t=[];return j[e.type].forEach((function(e){for(var n=0;n<j.card.length;n++){var i=j.card[n];i.id==e&&t.push(i)}})),t}},R=u.protocol()+"api.themoviedb.org/3/",D=u.protocol()+"image.tmdb.org/t/p/w300/",I=new z,H="4ef0d7355d9ffb5151e987764708ce96";function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=P(e,"api_key="+H),e=P(e,"language=ru"),t.genres&&(e=P(e,"with_genres="+t.genres)),t.page&&(e=P(e,"page="+t.page)),t.query&&(e=P(e,"query="+t.query)),R+e}function P(e,t){return e+(/\?/.test(e)?"&":"?")+t}function J(e){this.data={},this.work=0,this.check=function(){this.work>=e&&this.onComplite(this.data)},this.append=function(e,t){this.work++,this.data[e]=t,this.check()},this.error=function(){this.work++,this.check()}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=L(e,t);I.silent(o,(function(t){t.url=e,n(t)}),i)}var A={main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=new J(8);i.onComplite=function(){var e=[];i.data.wath&&e.push(i.data.wath),i.data.trend_day&&e.push(i.data.trend_day),i.data.trend_week&&e.push(i.data.trend_week),i.data.upcoming&&e.push(i.data.upcoming),i.data.popular&&e.push(i.data.popular),i.data.popular_tv&&e.push(i.data.popular_tv),i.data.top&&e.push(i.data.top),i.data.top_tv&&e.push(i.data.top_tv),e.length?t(e):n()};var o=function(e,t,n){n.title=e,i.append(t,n)};q("movie/now_playing",e,(function(e){o("Сейчас смотрят","wath",e)}),i.error.bind(i)),q("trending/moviews/day",e,(function(e){o("Сегодня в тренде","trend_day",e)}),i.error.bind(i)),q("trending/moviews/week",e,(function(e){o("В тренде за неделю","trend_week",e)}),i.error.bind(i)),q("movie/upcoming",e,(function(e){o("Смотрите в кинозалах","upcoming",e)}),i.error.bind(i)),q("movie/popular",e,(function(e){o("Популярные фильмы","popular",e)}),i.error.bind(i)),q("tv/popular",e,(function(e){o("Популярные сериалы","popular_tv",e)}),i.error.bind(i)),q("movie/top_rated",e,(function(e){o("Топ фильмы","top",e)}),i.error.bind(i)),q("tv/top_rated",e,(function(e){o("Топ сериалы","top_tv",e)}),i.error.bind(i))},img:function(e){return e?D+e:""},full:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new J(5);n.onComplite=t,q(e.method+"/"+e.id,e,(function(e){n.append("movie",e)}),n.error.bind(n)),q(e.method+"/"+e.id+"/credits",e,(function(e){n.append("actors",e)}),n.error.bind(n)),q(e.method+"/"+e.id+"/recommendations",e,(function(e){n.append("recomend",e)}),n.error.bind(n)),q(e.method+"/"+e.id+"/similar",e,(function(e){n.append("simular",e)}),n.error.bind(n)),q(e.method+"/"+e.id+"/videos",e,(function(e){n.append("videos",e)}),n.error.bind(n))},categoryFull:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=L(e.url,e);I.silent(i,t,n)},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=L("genre/movie/list",e);I.silent(i,t,n)},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=new J(5);i.onComplite=function(){var e=[];i.data.wath&&i.data.wath.results.length&&e.push(i.data.wath),i.data.popular&&i.data.popular.results.length&&e.push(i.data.popular),i.data.tv_today&&i.data.tv_today.results.length&&e.push(i.data.tv_today),i.data.tv_air&&i.data.tv_air.results.length&&e.push(i.data.tv_air),i.data.top&&i.data.top.results.length&&e.push(i.data.top),e.length?t(e):n()};var o=function(e,t,n){n.title=e,i.append(t,n)};q(e.url+"/now_playing",e,(function(e){o("Сейчас смотрят","wath",e)}),i.error.bind(i)),q(e.url+"/popular",e,(function(e){o("Популярное","popular",e)}),i.error.bind(i)),q(e.url+"/airing_today",e,(function(e){o("Сегодня в эфире","tv_today",e)}),i.error.bind(i)),q(e.url+"/on_the_air",e,(function(e){o("На этой недели","tv_air",e)}),i.error.bind(i)),q(e.url+"/top_rated",e,(function(e){o("В топе","top",e)}),i.error.bind(i))},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new J(2);n.onComplite=t,q("search/movie",e,(function(e){e.title="Фильмы",n.append("movie",e)}),n.error.bind(n)),q("search/tv",e,(function(e){e.title="Сериалы",n.append("tv",e)}),n.error.bind(n))},clear:function(){I.clear()},company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=L("company/"+e.id,e);I.silent(i,t,n)},actor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=function(e){var t=e.cast.map((function(e){return e.year=parseInt((e.release_date||e.first_air_date||"0000").slice(0,4)),e}));return t.sort((function(e,t){return t.year-e.year})),{results:t.slice(0,40)}},i=new J(3);i.onComplite=function(){var e={};i.data.actor&&(e.actor=i.data.actor),i.data.movie&&i.data.movie.cast.length&&(e.movie=n(i.data.movie)),i.data.tv&&i.data.tv.cast.length&&(e.tv=n(i.data.tv)),t(e)},q("person/"+e.id,e,(function(e){i.append("actor",e)}),i.error.bind(i)),q("person/"+e.id+"/movie_credits",e,(function(e){i.append("movie",e)}),i.error.bind(i)),q("person/"+e.id+"/tv_credits",e,(function(e){i.append("tv",e)}),i.error.bind(i))},favorite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i={};i.results=U.get(e),i.total_pages=Math.ceil(i.results.length/20),i.page=Math.min(e.page,i.total_pages);var o=i.page-1;i.results=i.results.slice(20*o,20*o+20),i.results.length?t(i):n()}};function V(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.extend(e,{title:e.name,original_title:e.original_name,release_date:e.first_air_date}),e.release_date=(e.release_date||"0000").slice(0,4);var i=t.get("card",e),o=new Image;o.crossOrigin="Anonymous",n.card_small&&(i.addClass("card--small"),i.find(".card__title").remove(),i.find(".card__age").remove()),n.card_category&&(i.addClass("card--category"),i.find(".card__age").remove()),this.image=function(){o.onload=function(){i.find("img")[0].src=o.src,i.addClass("card--loaded")},o.onerror=function(e){i.find("img")[0].src="./img/img_broken.svg"}},this.addicon=function(e){i.find(".card__icons-inner").append('<div class="card__icon icon--'+e+'"></div>')},this.favorite=function(){var t=U.check(e);i.find(".card__icon").remove(),t.book&&this.addicon("book"),t.like&&this.addicon("like"),t.wath&&this.addicon("wath")},this.create=function(){var t=this;this.favorite(),i.on("hover:focus",(function(n){t.onFocus(n.target,e)})).on("hover:enter",(function(n){t.onEnter(n.target,e)})).on("hover:long",(function(n){var i=Jt.enabled().name,o=U.check(e);_.show({title:"Действие",items:[{title:o.book?"Убрать из закладок":"В закладки",subtitle:"Смотрите в меню (Закладки)",where:"book"},{title:o.like?"Убрать из понравившихся":"Нравится",subtitle:"Смотрите в меню (Нравится)",where:"like"},{title:o.wath?"Убрать из ожидаемых":"Смотреть позже",subtitle:"Смотрите в меню (Позже)",where:"wath"}],onBack:function(){Jt.toggle(i)},onSelect:function(n){U.toggle(n.where,e),t.favorite(),Jt.toggle(i)}})})),this.image()},this.visible=function(){e.poster_path?o.src=A.img(e.poster_path):o.src="./img/img_broken.svg"},this.destroy=function(){o.onerror=function(){},o.onload=function(){},o.src="",i.remove(),i=null,o=null},this.render=function(){return i}}function K(){var e;e={normal:1,small:.9,bigger:1.1}[T.get("interface_size","normal")],$("body").css({fontSize:Math.max(window.innerWidth/84.17*e,10.6)+"px"}),$(".layer--width").css("width",window.innerWidth),$(".layer--height").css("height",window.innerHeight);var t=$(".head")[0].getBoundingClientRect();$(".layer--wheight").each((function(){var e=$(this),n=window.innerHeight-t.height;e.data("mheight")&&(n-=e.data("mheight")[0].getBoundingClientRect().height),e.css("height",n)}))}$(window).on("resize",K);var W={update:K},Y=document.createElement("canvas"),G=Y.getContext("2d");function Z(e){for(var t=e.data,n=[],i=0,o=t.length;i<o;i+=4)n.push([t[i],t[i+1],t[i+2]]);return n}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba("+e.join(",")+","+t+")"}function X(e,t,n){var i,o,a,r,s,l,c,d,u,v,g,f;return i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),g=function(e){return(u-e)/6/v+.5},f=function(e){return Math.round(100*e)/100},0==(v=u-Math.min(i,o,a))?c=d=0:(d=v/u,r=g(i),s=g(o),l=g(a),i===u?c=l-s:o===u?c=1/3+r-l:a===u&&(c=2/3+s-r),c<0?c+=1:c>1&&(c-=1)),[Math.round(360*c),f(100*d),f(100*u)]}function ee(e,t,n){t/=100,n/=100;var i=(1-Math.abs(2*n-1))*t,o=e/60,a=i*(1-Math.abs(o%2-1)),r=0,s=0,l=0;o>=0&&o<1?(r=i,s=a):o>=1&&o<2?(r=a,s=i):o>=2&&o<3?(s=i,l=a):o>=3&&o<4?(s=a,l=i):o>=4&&o<5?(r=a,l=i):(r=i,l=a);var c=n-i/2;return r+=c,s+=c,l+=c,r*=255,s*=255,l*=255,[Math.round(r),Math.round(s),Math.round(l)]}Y.width=30,Y.height=17;var te,ne={get:function(e){var t=Math.max(Y.width/e.width,Y.height/e.height),n=e.width*t,i=e.height*t;return G.drawImage(e,-(n-Y.width)/2,-(i-Y.height)/2,n,i),Z(G.getImageData(0,0,Y.width,Y.height))},extract:Z,palette:function(e){for(var t={bright:[0,0,0],average:[127,127,127],dark:[255,255,255]},n=0,i=0,o=0,a=e.length,r=0,s=765,l=0;l<e.length;l++){var c=e[l],d=c[0]+c[1]+c[2];n+=c[0],i+=c[1],o+=c[2],d>r&&(r=d,t.bright=c),d<s&&(s=d,t.dark=c)}return t.average=[Math.round(n/a),Math.round(i/a),Math.round(o/a)],t},rgba:Q,tone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,o=X(e[0],e[1],e[2]),a=ee(o[0],Math.min(n,o[1]),i);return Q(a,t)}},ie=$('\n    <div class="background">\n        <canvas class="background__one"></canvas>\n        <canvas class="background__two"></canvas>\n    </div>\n'),oe={one:{canvas:$(".background__one",ie),ctx:$(".background__one",ie)[0].getContext("2d")},two:{canvas:$(".background__two",ie),ctx:$(".background__two",ie)[0].getContext("2d")}},ae="one",re="",se={};function le(){return ie.find("canvas").removeClass("visible"),oe[ae="one"==ae?"two":"one"]}function ce(e,t){if(console.log(T.get("background","true")),!T.get("background","true"))return oe.one.canvas.removeClass("visible"),void oe.two.canvas.removeClass("visible");t.canvas[0].width=window.innerWidth,t.canvas[0].height=window.innerHeight;var n=e.palette,i=90*Math.PI/180,o=t.canvas[0].width*Math.cos(i),a=t.canvas[0].height*Math.sin(i),r=t.ctx.createLinearGradient(0,0,o,a);r.addColorStop(1,ne.tone(n.average,.7,50,80)),r.addColorStop(0,ne.rgba(n.dark,.2)),t.ctx.fillStyle=r,t.ctx.fillRect(0,0,t.canvas[0].width,t.canvas[0].height);for(var s=0;s<10;s++){var l=window.innerWidth*Math.random(),c=window.innerHeight*Math.random(),d=Math.max(window.innerHeight/8,window.innerHeight/5*Math.random()),u=t.ctx.createRadialGradient(l,c,d,l,c,2*d);u.addColorStop(0,ne.tone(s<5?n.average:n.bright,.1)),u.addColorStop(.5,ne.tone(s<5?n.average:n.bright,.05)),u.addColorStop(1,ne.tone(s<5?n.average:n.bright,0)),t.ctx.beginPath(),t.ctx.fillStyle=u,t.ctx.arc(l,c,2*d,0,2*Math.PI),t.ctx.fill()}t.canvas.addClass("visible")}function de(){se[re]&&ce(se[re],oe[ae])}function ue(){if(se[re])ce(se[re],le());else if(re){var e,t=new Image;t.crossOrigin="Anonymous",t.onload=function(){try{e=ne.get(t)}catch(t){e=[[200,200,200],[100,100,100],[10,10,10]]}se[re]={img:t,palette:ne.palette(e)},ce(se[re],le())},t.src=re}}T.listener.follow("change",(function(e){"background"==e.name&&de()})),$(window).on("resize",de);var ve,ge,fe,pe={render:function(){return ie},change:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(e=e.replace("https://","http://"))&&(re=e),clearTimeout(te),te=setTimeout((function(){ue()}),2e3)},update:de};function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.get("more");e.card_small&&n.addClass("card-more--small"),this.create=function(){var e=this;n.on("hover:focus",(function(t){e.onFocus(t.target)})).on("hover:enter",(function(t){e.onEnter(t.target)}))},this.render=function(){return n},this.destroy=function(){n.remove(),n=null}}function me(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.get("items_line",{title:e.title}),a=o.find(".items-line__body"),s=new l({horizontal:!0}),c=[],d=0;this.create=function(){s.render().find(".scroll__body").addClass("items-cards"),o.find(".items-line__title").text(e.title),this.bind(),a.append(s.render())},this.bind=function(){var t=this;e.results.forEach((function(n){var o=new V(n,i);o.create(),o.onFocus=function(n,a){d=c.indexOf(o),s.update(c[d].render(),!i.align_left),t.visible(),e.noimage||pe.change(A.img(a.poster_path)),t.onFocus&&t.onFocus(a)},o.onEnter=function(e,i){t.onEnter&&t.onEnter(),Ut.push({url:"",component:"full",id:n.id,method:i.name?"tv":"movie",card:n})},s.append(o.render()),c.push(o)})),e.results.length>=20&&!i.nomore&&this.more(),this.visible(),W.update()},this.more=function(){var t=this;(n=new he(i)).create(),n.onFocus=function(){s.update(n.render(),!i.align_left)},n.onEnter=function(){t.onEnter&&t.onEnter(),Ut.push({url:e.url,title:"Категория",component:"category_full",page:2,genres:i.genres})},s.append(n.render())},this.visible=function(){c.slice(d,d+7).forEach((function(e){e.visible()}))},this.toggle=function(){var e=this;Jt.add("items_line",{toggle:function(){Jt.collectionSet(s.render()),Jt.collectionFocus(!!c.length&&c[d].render()[0],s.render()),e.visible()},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):e.onLeft?e.onLeft():Jt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Jt.toggle("items_line")},this.render=function(){return o},this.destroy=function(){r.destroy(c),s.destroy(),o.remove(),n&&n.destroy(),c=null,n=null}}function _e(){var e;this.create=function(){e=t.get("info")},this.update=function(t){e.find(".info__title").text(t.title),e.find(".info__title-original").text(t.original_title),e.find(".info__create").text((t.release_date||t.first_air_date).slice(0,4)),e.find(".info__rate span").text(t.vote_average),e.find(".info__icon").removeClass("active");var n=U.check(t);$(".icon--book",e).toggleClass("active",n.book),$(".icon--like",e).toggleClass("active",n.like),$(".icon--wath",e).toggleClass("active",n.wath)},this.render=function(){return e},this.destroy=function(){e.remove(),e=null}}function ye(){var e=t.get("empty");this.start=function(){Jt.add("content",{toggle:function(){Jt.collectionSet(e),Jt.collectionFocus(!1,e)},left:function(){Jt.toggle("menu")},up:function(){Jt.toggle("head")},back:function(){Ut.backward()}}),Jt.toggle("content")},this.render=function(){return e}}function be(e){ge=$('<div class="youtube-player"><div id="youtube-player"></div><div id="youtube-player__progress" class="youtube-player__progress"></div></div>'),$("body").append(ge),ve=new YT.Player("youtube-player",{height:window.innerHeight,width:window.innerWidth,playerVars:{controls:0,showinfo:0,autohide:1,modestbranding:1,autoplay:1},videoId:e,events:{onReady:function(e){e.target.playVideo(),we()},onStateChange:function(e){0==e.data&&Jt.toggle("content")}}})}function we(){fe=setTimeout((function(){var e=ve.getCurrentTime()/ve.getDuration()*100;$("#youtube-player__progress").css("width",e+"%"),we()}),400)}var ke,xe,Ce,Se,$e={play:function(e){be(e),Jt.add("youtube",{invisible:!0,toggle:function(){},right:function(){ve.seekTo(ve.getCurrentTime()+10,!0)},left:function(){ve.seekTo(ve.getCurrentTime()-10,!0)},enter:function(){},gone:function(){clearTimeout(fe),ve.destroy(),ge.remove(),ge=null},back:function(){Jt.toggle("content")}}),Jt.toggle("youtube")}};function Ne(e){e.find(".selector").on("hover:focus",(function(e){Se=e.target,Ce.update($(e.target))})).on("hover:enter",(function(e){xe.onSelect&&xe.onSelect($(e.target))}))}function Me(){Jt.add("modal",{invisible:!0,toggle:function(){Jt.collectionSet(Ce.render()),Jt.collectionFocus(Se,Ce.render())},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){xe.onBack&&xe.onBack()}}),Jt.toggle("modal")}function Te(e){ke.find(".modal__title").text(e),ke.toggleClass("modal--empty-title",!e)}var ze={open:function(e){xe=e,ke=t.get("modal",{title:e.title}),Te(e.title),ke.toggleClass("modal--medium","medium"==e.size),ke.toggleClass("modal--large","large"==e.size),Ce=new l({over:!0,mask:e.mask}),ke.find(".modal__body").append(Ce.render()),Ne(e.html),Ce.append(e.html),$("body").append(ke),Me()},close:function(){Se=!1,Ce.destroy(),ke.remove()},update:function(e){Se=!1,Ce.clear(),Ce.append(e),Ne(e),Me()},title:Te};var je={start:function(e){var n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.extend(e.movie,{title:e.movie.name,original_title:e.movie.original_name,runtime:0,img:A.img(e.movie.poster_path)}),this.create=function(){var i=(e.movie.genres||["---"]).slice(0,3).map((function(e){return u.capitalizeFirstLetter(e.name)})).join(", ");n=t.get("full_start",{title:e.movie.title,original_title:e.movie.original_title,descr:u.substr(e.movie.overview,420),img:A.img(e.movie.poster_path),time:u.secondsToTime(60*e.movie.runtime,!0),genres:i,r_themovie:e.movie.vote_average,seasons:e.movie.number_of_seasons,episodes:e.movie.number_of_episodes}),e.movie.number_of_seasons&&n.find(".is--serial").removeClass("hide"),e.videos&&e.videos.results.length?n.find(".view--trailer").on("hover:enter",(function(){var t=[];e.videos.results.forEach((function(e){t.push({title:e.name,subtitle:e.official?"Официальный":"Неофициальный",id:e.key})})),_.show({title:"Трейлеры",items:t,onSelect:function(e){$e.play(e.id)},onBack:function(){Jt.toggle("full_start")}})})):n.find(".view--trailer").remove(),this.menu(),this.favorite()},this.menu=function(){var t=this;n.find(".open--menu").on("hover:enter",(function(){var n=Jt.enabled().name,i=U.check(o.object.card),a=[];T.get("parser_use")&&a.push({title:"Торренты",torrents:!0}),a.push({title:i.book?"Убрать из закладок":"В закладки",subtitle:"Смотрите в меню (Закладки)",where:"book"}),a.push({title:i.like?"Убрать из понравившихся":"Нравится",subtitle:"Смотрите в меню (Нравится)",where:"like"}),a.push({title:i.wath?"Убрать из ожидаемых":"Смотреть позже",subtitle:"Смотрите в меню (Позже)",where:"wath"}),_.show({title:"Действие",items:a,onBack:function(){Jt.toggle(n)},onSelect:function(i){i.torrents?Ut.push({url:"",title:"Торренты",component:"torrents",search:e.movie.title,movie:e.movie,page:1}):(U.toggle(i.where,o.object.card),t.favorite()),Jt.toggle(n)}})}))},this.favorite=function(){var e=U.check(o.object.card);$(".info__icon",n).removeClass("active"),$(".icon--book",n).toggleClass("active",e.book),$(".icon--like",n).toggleClass("active",e.like),$(".icon--wath",n).toggleClass("active",e.wath)},this.toggle=function(){var e=this;Jt.add("full_start",{toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(i,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Jt.toggle("full_start")},this.render=function(){return n},this.destroy=function(){i=null,n.remove()}},descr:function(e){var n,i,o;this.create=function(){n=t.get("items_line",{title:"Подробно"});var a=e.movie.genres.map((function(e){return'<div class="full-descr__tag selector" data-genre="'+e.id+'">'+e.name+"</div>"})).join(""),s=e.movie.production_companies.map((function(e){return'<div class="full-descr__tag selector" data-company="'+e.id+'">'+e.name+"</div>"})).join(""),l=e.movie.production_countries.map((function(e){return e.name})).join(", ");(i=t.get("full_descr",{text:e.movie.overview,genres:a,companies:s,relise:e.movie.release_date||e.movie.first_air_date,budget:"$ "+u.numberWithSpaces(e.movie.budget||0),countries:l})).find(".selector").on("hover:enter",(function(e){var n=$(e.target);n.data("genre")&&Ut.push({url:"movie",component:"category",genres:n.data("genre")}),n.data("company")&&(A.clear(),ze.open({title:"Компания",html:t.get("modal_loading"),size:"medium",onBack:function(){ze.close(),Jt.toggle("full_descr")}}),A.company({id:n.data("company")},(function(e){"modal"==Jt.enabled().name&&(r.empty(e,{homepage:"---",origin_country:"---",headquarters:"---"}),ze.update(t.get("company",e)))}),(function(){})))})).on("hover:focus",(function(e){o=e.target})),n.find(".items-line__body").append(i)},this.toggle=function(){var e=this;Jt.add("full_descr",{toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(o,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},down:function(){Navigator.canmove("down")?Navigator.move("down"):e.onDown()},up:function(){Navigator.canmove("up")?Navigator.move("up"):e.onUp()},gone:function(){},back:this.onBack}),Jt.toggle("full_descr")},this.render=function(){return n},this.destroy=function(){i.remove(),n.remove(),n=null,i=null}},actors:function(e){var n,i,o;this.create=function(){n=t.get("items_line",{title:"Актеры"}),(i=new l({horizontal:!0})).render().find(".scroll__body").addClass("full-actors"),n.find(".items-line__body").append(i.render()),e.actors.cast.forEach((function(e){var n=t.get("full_actor",{firstname:e.name,lastname:e.character,img:e.profile_path?A.img(e.profile_path):"./img/actor.svg"});n.on("hover:focus",(function(e){o=e.target,i.update($(e.target),!0)})).on("hover:enter",(function(){Ut.push({url:"",title:"Актер",component:"actor",id:e.id})})),i.append(n)}))},this.toggle=function(){var e=this;Jt.add("full_descr",{toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(o,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Jt.toggle("full_descr")},this.render=function(){return n},this.destroy=function(){i.destroy(),n.remove(),n=null}},recomend:me,simular:me};var Ee={start:function(e){var n,i;this.create=function(){n=t.get("actor_start",{name:e.name,birthday:e.birthday,descr:u.substr(e.biography,1020),img:A.img(e.profile_path),place:e.place_of_birth})},this.toggle=function(){var e=this;Jt.add("full_start",{toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(i,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Jt.toggle("full_start")},this.render=function(){return n},this.destroy=function(){i=null,n.remove()}},movie:me,tv:me};function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.get("files",e.movie);this.render=function(){return n},this.append=function(e){n.find(".files__body").append(e)},this.destroy=function(){n.remove(),n=null}}var Oe,Fe=i(),Ue=t.get("player_video"),Re=Ue.find(".player-video__display"),De={},Ie=0;function He(){var e=$('<video class="player-video__video" poster="./img/video_poster.png" crossorigin="anonymous"></video>');Re.append(e),(Oe=e[0]).addEventListener("waiting",(function(){Le(!0)})),Oe.addEventListener("playing",(function(){Le(!1)})),Oe.addEventListener("ended",(function(){Fe.send("ended",{})})),Oe.addEventListener("error",(function(e){var t=Oe.error||{},n=(t.message||"").toUpperCase();-1==n.indexOf("EMPTY SRC")&&(3==t.code?Fe.send("error",{error:"Не удалось декодировать видео"}):4==t.code?Fe.send("error",{error:"Видео не найдено или повреждено"}):Fe.send("error",{error:"code ["+t.code+"] details ["+n+"]"}))})),Oe.addEventListener("progress",(function(e){var t=Oe.duration;if(t>0)for(var n=0;n<Oe.buffered.length;n++)if(Oe.buffered.start(Oe.buffered.length-1-n)<Oe.currentTime){var i=Math.max(0,Math.min(100,Oe.buffered.end(Oe.buffered.length-1-n)/t*100))+"%";Fe.send("progress",{down:i});break}})),Oe.addEventListener("canplay",(function(){Fe.send("canplay",{})})),Oe.addEventListener("timeupdate",(function(){Fe.send("timeupdate",{duration:Oe.duration,current:Oe.currentTime})})),Oe.volume=1,Oe.muted=!1}function Le(e){Ue.toggleClass("video--load",e)}function Pe(){var e;try{e=Oe.play()}catch(e){}void 0!==e&&e.then((function(){console.log("Player","start plaining")})).catch((function(e){console.log("Player","play promise error")})),Fe.send("play",{})}function Je(){var e;try{e=Oe.pause()}catch(e){}void 0!==e&&e.then((function(){console.log("Player","pause")})).catch((function(){console.log("Player","pause promise error")})),Fe.send("pause",{})}function qe(e,t){Oe.duration&&(Ie=Math.max(0,Math.min(e,Oe.duration)),Je(),0==Ie?Oe.currentTime=0:Ie==Oe.duration&&(Oe.currentTime=Oe.duration),De.rewind=Date.now(),Fe.send("timeupdate",{duration:Oe.duration,current:Ie}),Fe.send("rewind",{}),function(e){clearTimeout(De.rewind_call),De.rewind_call=setTimeout((function(){Oe.currentTime=Ie,Ie=0,Pe()}),e?0:500)}(t))}var Ae={listener:Fe,url:function(e){He(),Oe.src=e,Oe.load(),Pe()},render:function(){return Ue},destroy:function(){Oe.src="",Oe.load(),Re.empty()},playpause:function(){Oe.paused?(Pe(),Fe.send("play",{})):(Je(),Fe.send("pause",{}))},rewind:function(e,t){if(Oe.duration){var n=Date.now(),i=Oe.duration/1800,o=n-(De.rewind||0)>50?20:60;0==Ie&&(Ie=Oe.currentTime),e?Ie+=Math.min(o,t||30*i):Ie-=Math.min(o,t||30*i),qe(Ie)}},play:Pe,pause:Je,size:function(e){Ue.attr("data-size",e)}};var Ve,Ke=t.get("player_panel"),We=i(),Ye={},Ge={},Ze={peding:$(".player-panel__peding",Ke),position:$(".player-panel__position",Ke),time:$(".player-panel__time",Ke),timenow:$(".player-panel__timenow",Ke),timeend:$(".player-panel__timeend",Ke),title:$(".player-panel__filename",Ke)},Qe=new function(e){this.state=e.state,this.start=function(){this.dispath(this.state)},this.dispath=function(t){var n=e.transitions[t];n?n.call(this):console.log("invalid action")}}({state:"start",transitions:{start:function(){clearTimeout(Ge.hide),clearTimeout(Ge.rewind),this.dispath("canplay")},canplay:function(){Ye.canplay?this.dispath("visible"):Xe(!0)},visible:function(){Ye.visible?Xe(!0):this.dispath("rewind")},rewind:function(){var e=this;clearTimeout(Ge.rewind),Ye.rewind?(Xe(!0),Ge.rewind=setTimeout((function(){Ye.rewind=!1,e.dispath("hide")}),1e3)):this.dispath("hide")},hide:function(){clearTimeout(Ge.hide),Ge.hide=setTimeout((function(){Xe(!1)}),1e3)}}});function Xe(e){Ke.toggleClass("panel--visible",e)}function et(){Ye.visible=!1,Xe(!1)}Ke.find(".selector").on("hover:focus",(function(e){Ve=e.target})),Ke.find(".player-panel__playpause").on("hover:enter",(function(e){We.send("playpause",{})})),Ke.find(".player-panel__next").on("hover:enter",(function(e){We.send("next",{})})),Ke.find(".player-panel__prev").on("hover:enter",(function(e){We.send("prev",{})})),Ke.find(".player-panel__playlist").on("hover:enter",(function(e){We.send("playlist",{})})),Ke.find(".player-panel__size").on("hover:enter",(function(e){var t=T.get("player_size","default"),n=[{title:"По умолчанию",subtitle:"Размер видео по умолчанию",value:"default",selected:"default"==t},{title:"Расширить",subtitle:"Расширяет видео на весь экран",value:"cover",selected:"cover"==t}];_.show({title:"Размер видео",items:n,onSelect:function(e){We.send("size",{size:e.value}),Jt.toggle("player_panel")},onBack:function(){Jt.toggle("player_panel")}})}));var tt={listener:We,render:function(){return Ke},toggle:function(){var e=this;Jt.add("player_panel",{invisible:!0,toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(Ve||$(".player-panel__playpause",Ke)[0],e.render()),Ye.visible=!0,Qe.start()},up:function(){Jt.toggle("player")},down:function(){Jt.toggle("player")},right:function(){Navigator.move("right")},left:function(){Navigator.move("left")},gone:function(){Ke.find(".selector").removeClass("focus"),et()},back:function(){Jt.toggle("player")}}),Jt.toggle("player_panel")},show:function(){Qe.start()},destroy:function(){Ve=!1,Ye={},Ze.peding.css({width:0}),Ze.position.css({width:0}),Ze.time.text("00:00"),Ze.timenow.text("00:00"),Ze.timeend.text("00:00"),Ke.toggleClass("panel--paused",!1)},hide:et,canplay:function(){Ye.canplay=!0,Qe.start()},update:function(e,t){"position"==e&&(Ze.position.css({width:t}),Ze.time.css({left:t})),"peding"==e&&Ze.peding.css({width:t}),"time"==e&&Ze.time.text(t),"timeend"==e&&Ze.timeend.text(t),"timenow"==e&&Ze.timenow.text(t),"play"==e&&Ke.toggleClass("panel--paused",!1),"pause"==e&&Ke.toggleClass("panel--paused",!0)},title:function(e){Ze.title.text(e)},rewind:function(){Ye.rewind=!0,Qe.start()}},nt=i(),it="",ot=[],at=0;function rt(){ot.forEach((function(e){e.selected=e.url==it,e.selected&&(at=ot.indexOf(e))}))}var st,lt={listener:nt,show:function(){rt();var e=Jt.enabled();_.show({title:"Плейлист",items:ot,onSelect:function(t){Jt.toggle(e.name),nt.send("select",{item:t})},onBack:function(){Jt.toggle(e.name)}})},url:function(e){it=e},set:function(e){ot=e},prev:function(){rt(),at>1&&nt.send("select",{item:ot[at-1]})},next:function(){rt(),at<ot.length-1&&nt.send("select",{item:ot[at+1]})}},ct=t.get("player");function dt(){Ae.destroy(),tt.destroy(),ct.detach()}function ut(e){lt.url(e.url),Ae.url(e.url),Ae.size(T.get("player_size","default")),tt.title(e.title),$("body").append(ct),Jt.add("player",{invisible:!0,toggle:function(){tt.hide()},up:function(){tt.toggle()},down:function(){tt.toggle()},right:function(){Ae.rewind(!0)},left:function(){Ae.rewind(!1)},gone:function(){},enter:function(){Ae.playpause()},back:function(){dt(),st?st():Jt.toggle("content"),st=!1}}),Jt.toggle("player"),tt.show(!0)}ct.append(Ae.render()),ct.append(tt.render()),Ae.listener.follow("timeupdate",(function(e){tt.update("time",u.secondsToTime(0|e.current,!0)),tt.update("timenow",u.secondsToTime(e.current||0)),tt.update("timeend",u.secondsToTime(e.duration||0)),tt.update("position",e.current/e.duration*100+"%")})),Ae.listener.follow("progress",(function(e){tt.update("peding",e.down)})),Ae.listener.follow("canplay",(function(e){tt.canplay()})),Ae.listener.follow("play",(function(e){tt.update("play")})),Ae.listener.follow("pause",(function(e){tt.update("pause")})),Ae.listener.follow("rewind",(function(e){tt.rewind()})),tt.listener.follow("playpause",(function(e){Ae.playpause()})),tt.listener.follow("playlist",(function(e){lt.show()})),tt.listener.follow("size",(function(e){Ae.size(e.size),T.set("player_size",e.size)})),tt.listener.follow("prev",(function(e){lt.prev()})),tt.listener.follow("next",(function(e){lt.next()})),lt.listener.follow("select",(function(e){dt(),ut(e.item)}));var vt={play:ut,playlist:function(e){lt.set(e)},render:function(){return ct},callback:function(e){st=e}},gt=new z,ft={},pt={},ht=["asf","wmv","divx","avi","mp4","m4v","mov","3gp","3g2","mkv","trp","tp","mts","mpg","mpeg","dat","vob","rm","rmvb"];var mt={start:function(e){ft.object=e,T.get("torrserver_url")?(ft.url=u.checkHttp(T.get("torrserver_url")),ze.open({title:"",html:t.get("modal_loading"),size:"medium",mask:!0,onBack:function(){ze.close(),gt.clear(),clearInterval(pt.files),Jt.toggle("content")}}),gt.timeout(3e3),gt.silent(ft.url+"/settings",(function(e){e.CacheSize||(ze.update(t.get("error",{title:"Ошибка",text:"Не удалось проверить на наличие TorrServer"})),gt.clear())}),(function(){ze.update(t.get("error",{title:"Ошибка",text:"Не удалось подключится к TorrServer"})),gt.clear()}),JSON.stringify({action:"get"})),function(){var e=JSON.stringify({action:"add",link:ft.object.MagnetUri||ft.object.Link,title:ft.object.title,poster:ft.object.poster,save_to_db:T.get("torrserver_savedb","false")});gt.timeout(2e4),gt.silent(ft.url+"/torrents",(function(e){ft.hash=e.hash,function(){var e=JSON.stringify({action:"get",hash:ft.hash}),n=0;pt.files=setInterval((function(){n++,gt.clear(),gt.timeout(2e3),gt.silent(ft.url+"/torrents",(function(e){e.file_stats&&(clearInterval(pt.files),function(e){var n=$('<div class="torrent-files"></div>'),i=e.filter((function(e){var t=e.path.split(".").pop().toLowerCase();return ht.indexOf(t)>=0})),o=[];i.forEach((function(e){r.extend(e,{title:u.shortText(e.path,50),size:u.bytesToSize(e.length),url:ft.url+"/stream?link="+ft.hash+"&index="+e.id+"&play"}),o.push(e);var i=t.get("torrent_file",e);i.on("hover:enter",(function(){vt.play({title:e.title,url:e.url}),vt.callback((function(){Jt.toggle("modal")})),vt.playlist(o)})),n.append(i)})),0==i.length?n=t.get("error",{title:"Пусто",text:"Не удалось извлечь подходящие файлы"}):ze.title("Файлы");ze.update(n)}(e.file_stats))}),!1,e),n>=45&&(ze.update(t.get("error",{title:"Ошибка",text:"Время ожидания истекло"})),gt.clear())}),2e3)}()}),(function(){ze.update(t.get("error",{title:"Ошибка",text:"Не удалось получить HASH"})),gt.clear()}),e)}()):ze.open({title:"Необходим TorrServer",html:$('<div class="about"><div>Для просмотра торрента онлайн, необходимо установить TorrServer. Подробнее что такое TorrServer и как установить, вы можете найти на сайте https://github.com/YouROK/TorrServer</div></div>'),onBack:function(){ze.close(),Jt.toggle("content")}})}};var _t={main:function(e){var t,n=new z,i=new l({mask:!0}),o=[],a=$("<div></div>"),s=0;this.create=function(){var t=this;return this.activity.loader(!0),A.main(e,this.build.bind(this),(function(){var e=new ye;a.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.build=function(n){var r=this;(t=new _e).create(),i.render().addClass("layer--wheight").data("mheight",t.render()),a.append(t.render()),a.append(i.render()),n.forEach((function(n){var a=new me(n,{url:n.url,card_small:!0,genres:e.genres});a.create(),a.onDown=r.down,a.onUp=r.up,a.onFocus=t.update,a.onBack=r.back,i.append(a.render()),o.push(a)})),this.activity.loader(!1),this.activity.toggle()},this.back=function(){Ut.backward()},this.down=function(){s++,s=Math.min(s,o.length-1),o[s].toggle(),i.update(o[s].render())},this.up=function(){--s<0?(s=0,Jt.toggle("head")):o[s].toggle(),i.update(o[s].render())},this.start=function(){Jt.add("content",{toggle:function(){o.length&&o[s].toggle()},back:this.back}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return a},this.destroy=function(){n.clear(),r.destroy(o),i.destroy(),t&&t.destroy(),a.remove(),o=null,n=null}},full:function(e){var t=new z,n=new l({mask:!0}),i=[],o=0;n.render().addClass("layer--wheight"),this.create=function(){var t=this;return this.activity.loader(!0),A.full(e,(function(e){t.activity.loader(!1),e.movie&&(t.build("start",e),t.build("descr",e),e.actors&&e.actors.cast&&e.actors.cast.length&&t.build("actors",e),e.recomend&&e.recomend.results.length&&(e.recomend.title="Рекомендации",e.recomend.noimage=!0,t.build("recomend",e.recomend)),e.simular&&e.simular.results.length&&(e.simular.title="Похожие",e.simular.noimage=!0,t.build("simular",e.simular)),t.activity.toggle())}),(function(){})),this.render()},this.build=function(t,o){var a=new je[t](o,{object:e});a.onDown=this.down,a.onUp=this.up,a.onBack=this.back,a.create(),i.push(a),n.append(a.render())},this.down=function(){o++,o=Math.min(o,i.length-1),i[o].toggle(),n.update(i[o].render())},this.up=function(){--o<0?(o=0,Jt.toggle("head")):i[o].toggle(),n.update(i[o].render())},this.back=function(){Ut.backward()},this.start=function(){Jt.add("content",{toggle:function(){i.length&&i[o].toggle()}}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return n.render()},this.destroy=function(){t.clear(),r.destroy(i),n.destroy(),i=null,t=null}},category:function(e){var t,n=new z,i=new l({mask:!0}),o=[],a=$("<div></div>"),s=0;this.create=function(){var t=this;return this.activity.loader(!0),A.category(e,this.build.bind(this),(function(){var e=new ye;a.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.build=function(n){var r=this;(t=new _e).create(),i.render().addClass("layer--wheight").data("mheight",t.render()),a.append(t.render()),a.append(i.render()),n.forEach((function(n){var a=new me(n,{url:n.url,card_small:!0,genres:e.genres});a.create(),a.onDown=r.down,a.onUp=r.up,a.onFocus=t.update,a.onBack=r.back,i.append(a.render()),o.push(a)})),this.activity.loader(!1),this.activity.toggle()},this.back=function(){Ut.backward()},this.down=function(){s++,s=Math.min(s,o.length-1),o[s].toggle(),i.update(o[s].render())},this.up=function(){--s<0?(s=0,Jt.toggle("head")):o[s].toggle(),i.update(o[s].render())},this.start=function(){Jt.add("content",{toggle:function(){o.length&&o[s].toggle()},back:this.back}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return a},this.destroy=function(){n.clear(),r.destroy(o),i.destroy(),t&&t.destroy(),a.remove(),a=null,n=null}},category_full:function(e){var t,n,i,o=new z,a=new l({mask:!0}),s=[],c=$("<div></div>"),d=$('<div class="category-full"></div>'),u=0;this.create=function(){var t=this;return this.activity.loader(!0),A.categoryFull(e,this.build.bind(this),(function(){var e=new ye;c.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.next=function(){var t=this;i||e.page<15&&e.page<u&&(i=!0,e.page++,A.categoryFull(e,(function(e){t.append(e),i=!1,Jt.enable("content")}),(function(){})))},this.append=function(e){var i=this;e.results.forEach((function(e){var o=new V(e,{card_category:!0});o.create(),o.onFocus=function(e,r){n=e,a.update(o.render(),!0),pe.change(A.img(r.poster_path)),t.update(r);var l=Math.ceil(s.length/7)-1;Math.ceil(s.indexOf(o)/7)>=l&&i.next()},o.onEnter=function(t,n){Ut.push({url:"",component:"full",id:e.id,method:n.name?"tv":"movie",card:e})},o.visible(),d.append(o.render()),s.push(o)}))},this.build=function(e){u=e.total_pages,(t=new _e).create(),a.render().addClass("layer--wheight").data("mheight",t.render()),c.append(t.render()),c.append(a.render()),this.append(e),a.append(d),this.activity.loader(!1),this.activity.toggle()},this.start=function(){Jt.add("content",{toggle:function(){Jt.collectionSet(a.render()),Jt.collectionFocus(n||!1,a.render())},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},right:function(){Navigator.move("right")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Jt.toggle("head")},down:function(){Navigator.canmove("down")&&Navigator.move("down")},back:function(){Ut.backward()}}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return c},this.destroy=function(){o.clear(),r.destroy(s),a.destroy(),t&&t.destroy(),c.remove(),d.remove(),o=null,s=null,c=null,d=null,t=null}},actor:function(e){var t=new z,n=new l({mask:!0}),i=[],o=0;n.render().addClass("layer--wheight"),this.create=function(){var t=this;return this.activity.loader(!0),A.actor(e,(function(e){t.activity.loader(!1),e.actor&&(t.build("start",e.actor),e.movie&&e.movie.results.length&&(e.movie.title="Фильмы",e.movie.noimage=!0,t.build("movie",e.movie)),e.tv&&e.tv.results.length&&(e.tv.title="Сериалы",e.tv.noimage=!0,t.build("tv",e.tv)),t.activity.toggle())}),(function(){})),this.render()},this.build=function(e,t){var o=new Ee[e](t,{nomore:!0});o.onDown=this.down,o.onUp=this.up,o.onBack=this.back,o.create(),i.push(o),n.append(o.render())},this.down=function(){o++,o=Math.min(o,i.length-1),i[o].toggle(),n.update(i[o].render())},this.up=function(){--o<0?(o=0,Jt.toggle("head")):i[o].toggle(),n.update(i[o].render())},this.back=function(){Ut.backward()},this.start=function(){Jt.add("content",{toggle:function(){i.length&&i[o].toggle()}}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return n.render()},this.destroy=function(){t.clear(),r.destroy(i),n.destroy(),i=null,t=null}},favorite:function(e){var t,n,i,o=new z,a=new l({mask:!0}),s=[],c=$("<div></div>"),d=$('<div class="category-full"></div>'),u=0;this.create=function(){var t=this;return this.activity.loader(!0),A.favorite(e,this.build.bind(this),(function(){var e=new ye;c.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.next=function(){var t=this;i||e.page<15&&e.page<u&&(i=!0,e.page++,A.favorite(e,(function(e){t.append(e),i=!1,Jt.enable("content")}),(function(){})))},this.append=function(e){var i=this;e.results.forEach((function(e){var o=new V(e,{card_category:!0});o.create(),o.onFocus=function(e,r){n=e,a.update(o.render(),!0),pe.change(A.img(r.poster_path)),t.update(r);var l=Math.ceil(s.length/7)-1;Math.ceil(s.indexOf(o)/7)>=l&&i.next()},o.onEnter=function(t,n){Ut.push({url:"",component:"full",id:e.id,method:n.name?"tv":"movie",card:e})},o.visible(),d.append(o.render()),s.push(o)}))},this.build=function(e){u=e.total_pages,(t=new _e).create(),a.render().addClass("layer--wheight").data("mheight",t.render()),c.append(t.render()),c.append(a.render()),this.append(e),a.append(d),this.activity.loader(!1),this.activity.toggle()},this.start=function(){Jt.add("content",{toggle:function(){Jt.collectionSet(a.render()),Jt.collectionFocus(n||!1,a.render())},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},right:function(){Navigator.move("right")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Jt.toggle("head")},down:function(){Navigator.canmove("down")&&Navigator.move("down")},back:function(){Ut.backward()}}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return c},this.destroy=function(){o.clear(),r.destroy(s),a.destroy(),t&&t.destroy(),c.remove(),d.remove(),o=null,s=null,c=null,d=null,t=null}},torrents:function(e){var n,i,o=new z,a=new l({mask:!0}),s=new Be(e),c=[],d=1,v=0,g=u.checkHttp(T.field("torlook_site"))+"/";a.render().addClass("layer--wheight"),a.render().find(".scroll__body").addClass("torrent-list"),this.create=function(){return this.activity.loader(!0),"jackett"==T.field("parser_torrent_type")?T.field("jackett_url")?(i=u.checkHttp(T.field("jackett_url")),this.loadJackett()):this.empty():T.get("native")?this.loadTorlook():"site"==T.field("torlook_parse_type")&&T.field("parser_website_url")?(i=u.checkHttp(T.field("parser_website_url")),this.loadTorlook()):"native"==T.field("torlook_parse_type")?this.loadTorlook():this.empty(),this.render()},this.loadTorlook=function(){var t=this;o.timeout(6e4);var n=T.get("native")||"native"==T.field("torlook_parse_type")?g+encodeURIComponent(e.search):i.replace("{q}",encodeURIComponent(g+encodeURIComponent(e.search)));o.native(n,(function(e){var n=e.replace(/\n|\r/g,"").match(new RegExp('<div class="webResult item">(.*?)</div>',"g")),i={Results:[]};$.each(n,(function(e,t){t=t.replace(/<img[^>]+>/g,"");var n=$(t+"</div>"),o={};o.Title=$(">p>a",n).text(),o.Tracker=$(".h2 > a",n).text(),o.size=$(".size",n).text(),o.PublishDate=$(".date",n).text()+"T22:00:00",o.Seeders=$(".seeders",n).text(),o.Peers=$(".leechers",n).text(),o.reguest=$(".magneto",n).attr("data-src"),n.remove(),o.Title&&o.reguest&&i.Results.push(o)})),c=i,t.build(i),t.activity.loader(!1),t.activity.toggle()}),(function(e,n){t.empty()}),!1,{dataType:"text"})},this.loadJackett=function(){var t=this;o.timeout(15e3);var n=i+"/api/v2.0/indexers/all/results?apikey="+T.get("jackett_key")+"&Query="+encodeURIComponent(e.search),a=e.movie.genres.map((function(e){return e.name}));n=u.addUrlComponent(n,"title="+encodeURIComponent(e.movie.title)),n=u.addUrlComponent(n,"title_original="+encodeURIComponent(e.movie.original_title)),n=u.addUrlComponent(n,"year="+encodeURIComponent((e.movie.release_date||e.movie.first_air_date).slice(0,4))),n=u.addUrlComponent(n,"is_serial="+(e.movie.first_air_date?"true":"false")),n=u.addUrlComponent(n,"genres="+encodeURIComponent(a.join(","))),o.native(n,(function(e){e.Results.sort((function(e,t){return t.Seeders-e.Seeders})),c=e,t.build(e),t.activity.loader(!1),t.activity.toggle()}),this.empty.bind(this))},this.empty=function(){var e=new ye;s.append(e.render()),this.start=e.start,this.activity.loader(!1),this.activity.toggle()},this.build=function(e){d=Math.ceil(e.Results.length/20),this.append(e.Results.slice(0,20)),s.append(a.render())},this.next=function(){if(e.page<15&&e.page<d){e.page++;var t=20*(e.page-1);this.append(c.Results.slice(t,t+20)),Jt.enable("content")}},this.loadMagnet=function(e){o.timeout(15e3);var n=T.get("native")||"native"==T.field("torlook_parse_type")?g+e.reguest:i.replace("{q}",encodeURIComponent(g+e.reguest));o.silent(n,(function(n){var i=n.match(/magnet:(.*?)'/);i&&i[1]?(ze.close(),e.MagnetUri="magnet:"+i[1],mt.start(e)):ze.update(t.get("error",{title:"Ошибка",text:"Неудалось получить magnet ссылку"}))}),(function(e,n){ze.update(t.get("error",{title:"Ошибка",text:o.errorDecode(e,n)}))}),!1,{dataType:"text"}),ze.open({title:"",html:t.get("modal_pending",{text:"Запрашиваю magnet ссылку"}),onBack:function(){ze.close(),o.clear(),Jt.toggle("content")}})},this.append=function(i){var o=this;i.forEach((function(i){v++;var s=u.parseTime(i.PublishDate),l=v;r.extend(i,{title:i.Title,date:s.full,tracker:i.Tracker,size:i.Size?u.bytesToSize(i.Size):i.size,seeds:i.Seeders,grabs:i.Peers});var c=t.get("torrent",i);c.on("hover:focus",(function(t){n=t.target,a.update($(t.target),!0),l>20*e.page-4&&o.next()})).on("hover:enter",(function(){i.reguest&&!i.MagnetUri?o.loadMagnet(i):mt.start(i)})),a.append(c)}))},this.back=function(){Ut.backward()},this.start=function(){Jt.add("content",{toggle:function(){Jt.collectionSet(a.render()),Jt.collectionFocus(n||!1,a.render())},up:function(){Navigator.canmove("up")?Navigator.move("up"):Jt.toggle("head")},down:function(){Navigator.move("down")},left:function(){Jt.toggle("menu")},back:this.back}),Jt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return s.render()},this.destroy=function(){o.clear(),s.destroy(),a.destroy(),c=null,o=null}}};var yt=i(),bt=[],wt=!1,kt=t.get("activitys"),xt=kt.find(".activitys__slides"),Ct=!1;function St(e){var n=t.get("activity"),i=n.find(".activity__body");this.stoped=!1,this.started=!1,this.append=function(){xt.append(n)},this.create=function(){e.create(i),i.append(e.render())},this.loader=function(e){n.toggleClass("activity--load",e)},this.restart=function(){this.append(),this.stoped=!1,e.start()},this.start=function(){this.started=!0,Jt.add("content",{invisible:!0,toggle:function(){},left:function(){Jt.toggle("menu")},up:function(){Jt.toggle("head")},back:function(){St.backward()}}),Jt.toggle("content"),this.stoped?this.restart():e.start()},this.pause=function(){this.started=!1,e.pause()},this.toggle=function(){this.started&&this.start()},this.stop=function(){this.started=!1,this.stoped||(this.stoped=!0,e.stop(),n.detach())},this.render=function(){return n},this.destroy=function(){e.destroy(),n.remove()},this.append()}function $t(){var e=bt[bt.length-1];e&&e.activity&&e.activity.pause();var t=bt.slice(-2);t.length>1&&t[0].activity&&t[0].activity.stop();var n=bt.slice(-5);if(n.length>4){var i=n[0];i.activity&&(i.activity.destroy(),i.activity=null)}}function Nt(e){$t(),Mt(e),bt.push(e),Et(e)}function Mt(e){var t=function(e){return new _t[e.component](e)}(e);e.activity=new St(t),t.activity=e.activity,e.activity.create()}function Tt(){window.history.back()}function zt(){window.history.pushState({url:""},"","")}function jt(){if(wt=!1,yt.send("backward",{count:bt.length}),1!=bt.length){xt.find(">div").removeClass("activity--active");var e=bt.pop();e&&setTimeout((function(){e.activity.destroy()}),200);var t=bt.slice(-5);t.length>4&&Mt(t[0]),(t=bt.slice(-1)[0])&&(t.activity||Mt(t),Et(t))}}function Et(e){!function(e){var t={};for(var n in e)"activity"!==n&&(t[n]=e[n]);T.set("activity",t)}(e),e.activity.start(),xt.find("> div").removeClass("activity--active"),e.activity.render().addClass("activity--active"),Qt.title(e.title)}window.addEventListener("popstate",(function(){Ct||(zt(),yt.send("popstate",{count:bt.length}),wt?wt():jt())})),zt();var Bt,Ot,Ft,Ut={listener:yt,push:Nt,back:Tt,render:function(){return kt},backward:jt,call:function(e){wt=e},last:function(){var e=T.get("activity","false");Nt(e||{url:"",title:"Главная",component:"main"})},out:function(){Ct=!0,Tt();for(var e=0;e<window.history.length;e++)Tt();setTimeout((function(){Ct=!1,zt()}),10)}},Rt=i(),Dt="",It={};function Ht(e,t){Bt&&Bt[e]&&("function"==typeof Bt[e]?Bt[e](t):"string"==typeof Bt[e]&&Ht(Bt[e],t))}function Lt(e){Bt&&Bt.gone&&Bt.gone(e),console.log("Toggle",e),It[e]&&(Bt=It[e],Dt=e,Ut.call((function(){Ht("back")})),Bt.toggle&&Bt.toggle(),Ot=$(".selector"),Rt.send("toggle",{name:e}))}var Pt,Jt={listener:Rt,add:function(e,t){It[e]=t},move:function(e){Ht(e)},enter:function(){Bt&&Bt.enter?Ht("enter"):Ft&&Ft.trigger("hover:enter")},finish:function(){Ht("finish")},toggle:Lt,trigger:function(e,t){Ht(e,t)},back:function(){Ht("back")},focus:function(e){Ot&&Ot.removeClass("focus enter"),$(e).addClass("focus").trigger("hover:focus"),Ft=$(e)},collectionSet:function(e){var t=e.find(".selector").toArray();(t.length||Bt.invisible)&&(Ft=!1,$(".selector").removeClass("focus enter"),Ot&&Ot.unbind(".hover"),Navigator.setCollection(t))},collectionFocus:function(e,t){if(e)Navigator.focus(e);else{var n=t.find(".selector").toArray();n.length&&Navigator.focus(n[0])}},enable:function(e){Dt==e&&Lt(e)},enabled:function(){return{name:Dt,controller:Bt}},long:function(){Bt&&Bt.long?Ht("long"):Ft&&Ft.trigger("hover:long")}},qt=T.get("notice","{}"),At=[{time:"2021-09-28 16:00",title:"Исправления",descr:"1. Исправлена ошибка (Невозможно получить HASH)<br>2. Доделан парсер для MSX, теперь не нужно указывать явную ссылку, только по желанию<br> 3. Улучшен парсер jac.red, теперь точнее ищет"},{time:"2021-09-27 15:00",title:"Исправлен парсер",descr:"В парсере была выявлена ошибка, из за которой jac.red не выдавал результаты"},{time:"2021-09-26 17:00",title:"Добро пожаловать!",descr:"Это ваш первый запуск приложения, надеемся вам очень понравится. Приятного вам просмотра."}];function Vt(){var e=0;return At.forEach((function(t){var n=new Date(t.time).getTime();e=Math.max(e,n)})),e}function Kt(){Pt.find(".notice--icon").toggleClass("active",Vt()>qt.time)}r.extend(qt,{time:0});var Wt,Yt={open:function(){var e=$("<div></div>");At.slice(0,5).forEach((function(n){var i=t.get("notice",n);e.append(i)})),ze.open({title:"Уведомления",size:"medium",html:e,onBack:function(){ze.close(),Jt.toggle("head")}}),qt.time=Vt(),T.set("notice",qt),Kt()},start:function(e){Pt=e,Kt()}},Gt=t.get("head");u.time(Gt),Yt.start(Gt),Gt.find(".selector").on("hover:focus",(function(e){Wt=e.target})),Gt.find(".open--settings").on("hover:enter",(function(){Jt.toggle("settings")})),Gt.find(".open--notice").on("hover:enter",(function(){Yt.open()})),Jt.add("head",{toggle:function(){Jt.collectionSet(Gt),Jt.collectionFocus(Wt,Gt)},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Jt.toggle("menu")},down:function(){Jt.toggle("content")}});var Zt,Qt={render:function(){return Gt},title:function(e){Gt.find(".head__title").text(e?"- "+e:"")}},Xt=t.get("menu"),en=[];Xt.find(".selector").on("hover:enter",(function(e){var n,i=$(e.target).data("action"),o=$(e.target).data("type");"catalog"==i&&(n=[],en.forEach((function(e){n.push({title:e.name,id:e.id})})),_.show({title:"Каталог",items:n,onSelect:function(e){Ut.push({url:"movie",title:e.title,component:"category",genres:e.id})},onBack:function(){Jt.toggle("menu")}})),"movie"!=i&&"tv"!=i||Ut.push({url:i,title:"movie"==i?"Фильмы":"Сериалы",component:"category"}),"main"==i&&Ut.push({url:"",title:"Главная",component:"main"}),"search"==i&&Jt.toggle("search"),"settings"==i&&Jt.toggle("settings"),"about"==i&&ze.open({title:"О приложение",html:t.get("about"),size:"medium",onBack:function(){ze.close(),Jt.toggle("content")}}),"favorite"==i&&Ut.push({url:"",title:"book"==o?"Закладки":"like"==o?"Нравится":"Позже",component:"favorite",type:o,page:1})})).on("hover:focus",(function(e){Zt=e.target})),Jt.add("menu",{toggle:function(){Jt.collectionSet(Xt),Jt.collectionFocus(Zt,Xt),$("body").toggleClass("menu--open",!0)},right:function(){Jt.toggle("content")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Jt.toggle("head")},down:function(){Navigator.move("down")},gone:function(){$("body").toggleClass("menu--open",!1)}}),A.genres({},(function(e){en=e.genres}));var tn={render:function(){return Xt}};function nn(e){var n,i=new l({mask:!0,over:!0}),o=t.get("settings_"+e);T.get("native")&&o.find(".is--torllok").remove(),i.render().find(".scroll__content").addClass("layer--wheight").data("mheight",$(".settings__head")),o.find(".selector").on("hover:focus",(function(e){n=e.target,i.update($(e.target),!0)})),N.bind(o.find(".selector")),Jt.add("settings_component",{toggle:function(){Jt.collectionSet(o),Jt.collectionFocus(n,o)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){i.destroy(),o.remove(),Jt.toggle("settings")}}),this.destroy=function(){i.destroy(),o.remove(),o=null},this.render=function(){return i.render(o)}}var on=t.get("settings"),an=on.find(".settings__body");var rn=new function(){var e,n,i=this,o=new l({mask:!0,over:!0});this.create=function(){(e=t.get("settings_main")).find(".selector").on("hover:focus",(function(e){n=e.target,o.update($(e.target),!0)})).on("hover:enter",(function(e){i.render().detach(),i.onCreate($(e.target).data("component"))}))},this.active=function(){Jt.collectionSet(e),Jt.collectionFocus(n,e)},this.render=function(){return o.render(e)}};rn.onCreate=function(e){var t=new nn(e);an.empty().append(t.render()),Jt.toggle("settings_component")},rn.create(),Jt.add("settings",{toggle:function(){an.empty().append(rn.render()),rn.active(),$("body").toggleClass("settings--open",!0)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},left:function(){rn.render().detach(),Jt.toggle("content")},gone:function(e){"settings_component"!==e&&$("body").toggleClass("settings--open",!1)},back:function(){rn.render().detach(),Jt.toggle("head")}});var sn={render:function(){return on}};function ln(){var e,t,n=[],o=0;this.listener=i(),this.create=function(){e=new l({over:!0})},this.search=function(e){var n=this;clearTimeout(t),t=setTimeout((function(){A.search({query:encodeURIComponent(e)},(function(e){n.clear(),e.movie&&e.movie.results.length&&n.build(e.movie),e.tv&&e.tv.results.length&&n.build(e.tv),Jt.enable("search_results")}))}),1e3)},this.build=function(t){var i=this,o=new me(t,{align_left:!0});o.onDown=this.down,o.onUp=this.up,o.onBack=this.back.bind(this),o.onLeft=function(){i.listener.send("left")},o.onEnter=function(){i.listener.send("enter")},o.create(),n.push(o),e.append(o.render())},this.back=function(){this.listener.send("back")},this.down=function(){o++,o=Math.min(o,n.length-1),n[o].toggle(),e.update(n[o].render())},this.up=function(){--o<0?o=0:n[o].toggle(),e.update(n[o].render())},this.clear=function(){e.reset(),o=0,r.destroy(n),n=[]},this.toggle=function(){var t=this;Jt.add("search_results",{invisible:!0,toggle:function(){Jt.collectionSet(e.render()),n.length&&n[0].toggle()},back:function(){t.listener.send("back")},left:function(){t.listener.send("left")}}),Jt.toggle("search_results")},this.render=function(){return e.render()},this.destroy=function(){clearTimeout(t),this.clear(),e.destroy(),this.listener.destroy()}}function cn(){var e,t,n=[];this.listener=i(),this.create=function(){var t=this;e=new l({over:!0,mask:!1,nopadding:!0}),(n=T.get("search_history","[]")).forEach((function(e){t.append(e)}))},this.append=function(n){var i=this,o=$('<div class="search-history-key selector"><div>'+n+"</div></div>");o.on("hover:enter",(function(){i.listener.send("enter",{value:n})})).on("hover:focus",(function(n){t=n.target,e.update($(n.target))})),e.append(o)},this.add=function(e){-1==n.indexOf(e)&&(r.insert(n,0,e),T.set("search_history",n))},this.toggle=function(){var n=this;Jt.add("search_history",{toggle:function(){Jt.collectionSet(e.render()),Jt.collectionFocus(t,e.render())},up:function(){Navigator.canmove("up")?Navigator.move("up"):n.listener.send("up")},down:function(){Navigator.move("down")},right:function(){n.listener.send("right")},back:function(){n.listener.send("back")}}),Jt.toggle("search_history")},this.render=function(){return e.render()},this.destroy=function(){e.destroy(),this.listener.destroy(),n=null,t=null}}var dn,un,vn,gn,fn=$("<div></div>"),pn="";function hn(){dn=t.get("search"),fn.append(dn),(vn=new cn).create(),vn.listener.follow("right",(function(){un.toggle()})),vn.listener.follow("up",(function(){gn.toggle()})),vn.listener.follow("enter",(function(e){un.clear(),gn.value(e.value),un.toggle()})),vn.listener.follow("back",mn),dn.find(".search__history").append(vn.render()),(un=new ln).create(),un.listener.follow("left",(function(){gn.toggle()})),un.listener.follow("enter",(function(){pn&&vn.add(pn),mn()})),un.listener.follow("back",mn),dn.find(".search__results").append(un.render()),(gn=new s({layout:{en:["1 2 3 4 5 6 7 8 9 0","q w e r t y u i o p","a s d f g h j k l","z x c v b n m","{RU} {space} {bksp}"],default:["1 2 3 4 5 6 7 8 9 0","й ц у к е н г ш щ з х ъ","ф ы в а п р о л д ж э","я ч с м и т ь б ю","{EN} {space} {bksp}"]}})).create(),gn.listener.follow("change",(function(e){(pn=e.value.trim())?(dn.find(".search__input").text(pn),un.search(pn)):dn.find(".search__input").text("Введите текст...")})),gn.listener.follow("right",(function(){un.toggle()})),gn.listener.follow("down",(function(){vn.toggle()})),gn.listener.follow("back",mn),gn.toggle()}function mn(){gn.destroy(),un.destroy(),vn.destroy(),dn.remove(),fn.empty(),Jt.toggle("content")}Jt.add("search",{invisible:!0,toggle:function(){hn()},back:mn});var _n={render:function(){return fn}};var yn,bn={app:function(){var e=$("#app").empty(),n=t.get("wrap");n.find(".wrap__left").append(tn.render()),n.find(".wrap__content").append(Ut.render()),e.append(pe.render()),e.append(Qt.render()),e.append(n),e.append(sn.render()),e.append(_n.render())}},wn=!1,kn=i(),xn=0,Cn=0;function Sn(e){wn=e,kn.send("toggle",{status:wn})}function $n(e){return 13==e||29443==e||117==e||65385==e}function Nn(e){var t;return window.event?t=e.keyCode:e.which&&(t=e.which),t}window.addEventListener("keydown",(function(e){Cn=Nn(e),xn=Date.now(),yn||(yn=setTimeout((function(){$n(Cn)&&(kn.send("longdown",{}),Jt.long())}),800))})),window.addEventListener("keyup",(function(e){clearTimeout(yn),yn=null,Date.now()-xn>40&&$n(Nn(e))&&Jt.enter()})),window.addEventListener("keydown",(function(e){var t=Nn(e);if(kn.send("keydown",{code:t,enabled:wn}),!$n(t)&&wn){if(37!=t&&4!=t||Jt.move("left"),38!=t&&29460!=t||Jt.move("up"),39!=t&&5!=t||Jt.move("right"),40!=t&&29461!=t||Jt.move("down"),33!=t&&427!=t||Jt.move("toup"),34!=t&&428!=t||Jt.move("todown"),13!=t&&29443!=t&&117!=t&&65385!=t||Jt.enter(),10009!=t&&461!=t||history.back(),32!=t&&179!=t||Jt.trigger("playpause"),415!=t&&71!=t||Jt.trigger("play"),413==t&&Jt.trigger("stop"),412!=t&&69!=t&&177!=t||Jt.trigger("rewindBack"),418!=t&&417!=t&&72!=t&&176!=t||Jt.trigger("rewindForward"),19!=t&&74!=t||Jt.trigger("pause"),457==t&&Jt.trigger("info"),10146==t&&e.preventDefault(),10133==t&&Jt.toggle("settings"),8==t||27==t||461==t||10009==t||88==t)return e.preventDefault(),Ut.back(),!1;e.preventDefault()}}));var Mn={listener:kn,enable:function(){Sn(!0)},disable:function(){Sn(!1)}};"undefined"!=typeof webOS?T.set("platform","webos"):"undefined"!=typeof webapis&&"undefined"!=typeof tizen?T.set("platform","tizen"):T.set("platform",""),T.set("native",!!T.get("platform")),Jt.listener.follow("toggle",(function(){W.update()})),Ut.listener.follow("backward",(function(e){if(1==e.count){var t=Jt.enabled();_.show({title:"Выход",items:[{title:"Да выйти",out:!0},{title:"Продолжить"}],onSelect:function(e){e.out?(Ut.out(),Jt.toggle(t.name)):Jt.toggle(t.name)},onBack:function(){Jt.toggle(t.name)}})}console.log("backward",e.count)})),Navigator.follow("focus",(function(e){Jt.focus(e.elem)})),T.listener.follow("change",(function(e){"interface_size"==e.name&&W.update()})),bn.app(),Ut.last(),setTimeout((function(){Mn.enable(),$(".welcome").fadeOut(500)}),1e3)}();